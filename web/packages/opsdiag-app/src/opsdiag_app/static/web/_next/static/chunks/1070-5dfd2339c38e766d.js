"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1070],{7132:(e,t,a)=>{a.d(t,{ZI:()=>r,zq:()=>l});let n="/models/huggingface.svg",l=new Proxy({},{get:(e,t)=>({label:function(e){var t;if(!e)return"";if(null==(t=o[e])?void 0:t.label)return o[e].label;let a=e.toLowerCase();for(let t in o){let n=o[t];if(n.patterns&&n.patterns.some(e=>a.includes(e.toLowerCase()))){let t=e.match(/[-_](\d+b|\d+\.\d+b?|v\d+(\.\d+)?)/i),a=e.match(/[-_](\d+b)/i),l=n.label;return t&&!a&&(l+=" ".concat(t[1])),a&&(l+=" ".concat(a[1])),l}}return e}(t),icon:r(t)})}),o={deepseek:{label:"DeepSeek",icon:"/models/deepseek.png",patterns:["deepseek","r1"]},qwen:{label:"Qwen",icon:"/models/qwen2.png",patterns:["qwen","qwen2","qwen2.5","qwq","qvq"]},gemini:{label:"Gemini",icon:"/models/gemini.png",patterns:["gemini"]},moonshot:{label:"Moonshot",icon:"/models/moonshot.png",patterns:["moonshot","kimi"]},doubao:{label:"Doubao",icon:"/models/doubao.png",patterns:["doubao"]},ernie:{label:"ERNIE",icon:"/models/ernie.png",patterns:["ernie"]},proxyllm:{label:"Proxy LLM",icon:"/models/chatgpt.png",patterns:["proxy"]},chatgpt:{label:"ChatGPT",icon:"/models/chatgpt.png",patterns:["chatgpt","gpt","o1","o3"]},vicuna:{label:"Vicuna",icon:"/models/vicuna.jpeg",patterns:["vicuna"]},chatglm:{label:"ChatGLM",icon:"/models/chatglm.png",patterns:["chatglm","glm"]},llama:{label:"Llama",icon:"/models/llama.jpg",patterns:["llama","llama2","llama3"]},baichuan:{label:"Baichuan",icon:"/models/baichuan.png",patterns:["baichuan"]},claude:{label:"Claude",icon:"/models/claude.png",patterns:["claude"]},bard:{label:"Bard",icon:"/models/bard.gif",patterns:["bard"]},tongyi:{label:"Tongyi",icon:"/models/tongyi.apng",patterns:["tongyi"]},yi:{label:"Yi",icon:"/models/yi.svg",patterns:["yi"]},bailing:{label:"Bailing",icon:"/models/bailing.svg",patterns:["bailing"]},wizardlm:{label:"WizardLM",icon:"/models/wizardlm.png",patterns:["wizard"]},internlm:{label:"InternLM",icon:"/models/internlm.png",patterns:["internlm"]},solar:{label:"Solar",icon:"/models/solar_logo.png",patterns:["solar"]},gorilla:{label:"Gorilla",icon:"/models/gorilla.png",patterns:["gorilla"]},zhipu:{label:"Zhipu",icon:"/models/zhipu.png",patterns:["zhipu"]},falcon:{label:"Falcon",icon:"/models/falcon.jpeg",patterns:["falcon"]},huggingface:{label:"Hugging Face",icon:"/models/huggingface.svg",patterns:["huggingface","hf"]}};function r(e){var t;if(!e)return n;let a=e.toLowerCase();if(null==(t=o[e])?void 0:t.icon)return o[e].icon;for(let e in o){let t=o[e];if(t.patterns&&t.patterns.some(e=>a.includes(e.toLowerCase())))return t.icon}let l=a.split(/[-_]/);if(l.length>0){let e=l[0];for(let t in o)if(e===t.toLowerCase())return o[t].icon}return n}},28867:(e,t,a)=>{a.d(t,{fG:()=>es,LO:()=>ec,$q:()=>i.$q,tI:()=>N,A1:()=>ee,Wz:()=>v,CB:()=>D,Ty:()=>p,Vb:()=>el,CK:()=>S,cT:()=>F,kQ:()=>j,TT:()=>Q,a8:()=>P,Tu:()=>T,O_:()=>R,Ir:()=>b,mr:()=>d,Eg:()=>i.Eg,Y6:()=>J,eH:()=>i.eH,rW:()=>i.rW,Db:()=>i.Db,su:()=>i.su,lw:()=>z,r:()=>I,d_:()=>i.d_,PS:()=>i.PS,PO:()=>i.PO,RI:()=>V,b7:()=>L,uh:()=>q,ME:()=>x,B1:()=>Y,O6:()=>B,RO:()=>y,BN:()=>i.BN,zx:()=>Z,Hy:()=>O,Mz:()=>X,Xr:()=>i.Xr,Tz:()=>C,f1:()=>w,j_:()=>k,C0:()=>ea,o0:()=>A,b1:()=>_,C5:()=>f,LU:()=>i.LU,T1:()=>g,K8:()=>m,Cf:()=>u,GE:()=>E,V6:()=>c,Nq:()=>et,Mn:()=>W,vc:()=>s,kE:()=>H,Z9:()=>G,Ps:()=>U,bQ:()=>K,bl:()=>$,fy:()=>i.fy,Nr:()=>i.Nr,qj:()=>h,XX:()=>M});var n,l=a(47937),o=a(81702),r=a(23464),i=a(92366);let s=e=>ec("/api/v1/chat/stop?conv_session_id=".concat(e.conv_session_id),e);(0,l.F6)();let c=(e,t)=>ec("/knowledge/".concat(e,"/document/list"),t),p=e=>ec("/knowledge/".concat(e.space_name,"/document/yuque/add"),e),d=(e,t)=>ec("/knowledge/".concat(e,"/document/edit"),t),u=e=>es("/knowledge/".concat(e,"/recommend_questions")),g=e=>es("/knowledge/".concat(e,"/recall_retrievers")),m=(e,t)=>ec("/knowledge/".concat(t,"/recall_test"),e),f=e=>es("/prompt/type/targets?prompt_type=".concat(e)),_=e=>ec("/prompt/template/load?prompt_type=".concat(e.prompt_type,"&target=").concat(e.target,"&sub_target=").concat(e.sub_target),e),v=e=>ec("/prompt/add",e),h=e=>ec("/prompt/update",e),b=e=>ec("/prompt/delete",e),y=e=>ec("/prompt/query_page?page=".concat(e.page,"&page_size=").concat(e.page_size),e),w=e=>ec("/prompt/response/verify",e),k=e=>ec("/api/v1/chat/dialogue/new?app_code=".concat(e.app_code),e),L=()=>es("/api/v1/chat/dialogue/list"),q=e=>es("/api/v1/chat/dialogue/list?filter=".concat(e)),C=()=>es("/api/v1/model/types"),I=e=>es("/api/v1/chat/dialogue/messages/history?con_uid=".concat(e)),A=e=>{let{convUid:t,chatMode:a,data:n,config:l,model:o,temperatureValue:r,maxNewTokensValue:i,userName:s,sysCode:c}=e;return ec(((e,t)=>{let a=Object.keys(t).filter(e=>void 0!==t[e]).map(e=>"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))).join("&");return a?"".concat(e,"?").concat(a):e})("/api/v1/resource/file/upload",{conv_uid:t,chat_mode:a,model_name:o,user_name:s,sys_code:c,temperature:r,max_new_tokens:i}),n,{headers:{"Content-Type":"multipart/form-data"},...l})},S=e=>ec("/api/v1/chat/dialogue/clear?con_uid=".concat(e)),P=e=>ec("/api/v1/chat/dialogue/delete?con_uid=".concat(e)),z=e=>ec("/knowledge/".concat(e,"/arguments"),{}),E=(e,t)=>ec("/knowledge/".concat(e,"/argument/save"),t),O=e=>ec("/knowledge/space/list",e),x=(e,t)=>ec("/knowledge/".concat(e,"/document/list"),t),N=(e,t)=>ec("/knowledge/".concat(e,"/document/add"),t),D=e=>ec("/knowledge/space/add",e),V=()=>es("/knowledge/document/chunkstrategies"),U=(e,t)=>ec("/knowledge/".concat(e,"/document/sync"),t),G=(e,t)=>ec("/knowledge/".concat(e,"/document/sync_batch"),t),M=(e,t)=>ec("/knowledge/".concat(e,"/document/upload"),t),T=(e,t)=>ec("/knowledge/".concat(e,"/document/delete"),t),R=e=>ec("/knowledge/space/delete",e),B=()=>es("/api/v2/serve/model/models"),j=e=>ec("/api/v2/serve/model/models",e),H=e=>ec("/api/v2/serve/model/models/stop",e),W=e=>ec("/api/v2/serve/model/models/start",e),X=()=>es("/api/v2/serve/model/model-types"),F=e=>ec("/api/v1/app/collect",e),K=e=>ec("/api/v1/app/uncollect",e),$=e=>ec("/api/v1/app/unpublish",{app_code:e}),J=e=>es("/api/v1/app/info",e),Q=e=>ec("/api/v1/app/remove",e),Z=()=>es("/knowledge/space/config"),Y=(e,t)=>ec("/api/v1/serve/mcp/query_fuzzy?page=".concat(null==t?void 0:t.page,"&page_size=").concat(null==t?void 0:t.page_size),e),ee=e=>ec("/api/v1/serve/mcp/",e),et=e=>ec("/api/v1/serve/mcp/start",e),ea=e=>ec("/api/v1/serve/mcp/offline",e);var en=a(59362);let el=(e,t,a)=>e.then(e=>{let{data:n}=e;if(!n)throw Error("Network Error!");if(!n.success)if("*"===a||n.err_code&&a&&a.includes(n.err_code));else{var l;t&&t.error({message:"Request error",description:null!=(l=null==n?void 0:n.err_msg)?l:"The interface is abnormal. Please try again later"})}return[null,n.data,n,e]}).catch(e=>{let a=e.message;if(e instanceof en.pe)try{let{err_msg:t}=JSON.parse(e.request.response);t&&(a=t)}catch(e){}return t&&t.error({message:"Request error",description:a}),[e,null,null,null]});var eo=a(49509);let er=r.A.create({baseURL:null!=(n=eo.env.NEXT_PUBLIC_API_BASE_URL)?n:"/"}),ei=["/db/add","/db/test/connect","/db/summary","/params/file/load","/chat/prepare","/model/start","/model/stop","/editor/sql/run","/sql/editor/submit","/editor/chart/run","/chart/editor/submit","/document/upload","/document/sync","/agent/install","/agent/uninstall","/personal/agent/upload"];er.interceptors.request.use(e=>{let t=ei.some(t=>e.url&&e.url.indexOf(t)>=0);return e.timeout||(e.timeout=t?6e4:1e5),e.headers.set(o.uz,(0,l.F6)()),e});let es=(e,t,a)=>er.get(e,{params:t,...a}),ec=(e,t,a)=>er.post(e,t,a)},39740:(e,t,a)=>{a.d(t,{UK:()=>s,V:()=>p,cE:()=>d,rA:()=>c});var n=a(95155),l=a(28867);a(81702);var o=a(54099),r=a(35695),i=a(12115);let s=(0,i.createContext)({mode:"light",scene:"",chatId:"",model:"",modelList:[],dbParam:void 0,dialogueList:[],agent:"",setAgent:()=>{},setModel:()=>{},setIsContract:()=>{},setIsMenuExpand:()=>{},setDbParam:()=>void 0,setMode:()=>void 0,history:[],setHistory:()=>{},docId:void 0,setDocId:()=>{},currentDialogInfo:{chat_scene:"",app_code:""},setCurrentDialogInfo:()=>{},adminList:[],refreshDialogList:()=>{}}),c=e=>{var t,a,c;let{children:p}=e,d=(0,r.useSearchParams)(),u=null!=(t=null==d?void 0:d.get("conv_uid"))?t:"",g=null!=(a=null==d?void 0:d.get("scene"))?a:"",m=null!=(c=null==d?void 0:d.get("db_param"))?c:"",[f,_]=(0,i.useState)(!1),[v,h]=(0,i.useState)("light"),[b,y]=(0,i.useState)("chat_dashboard"!==g),[w,k]=(0,i.useState)(m),[L,q]=(0,i.useState)(""),[C,I]=(0,i.useState)([]),[A,S]=(0,i.useState)(),[P,z]=(0,i.useState)("light"),[E,O]=(0,i.useState)(u),[x,N]=(0,i.useState)([]),[D,V]=(0,i.useState)({chat_scene:"",app_code:""}),{data:U=[]}=(0,o.A)(async()=>{let[,e]=await (0,l.Vb)((0,l.Tz)());return null!=e?e:[]}),{data:G=[],refresh:M,loading:T}=(0,o.A)(async()=>await (0,l.Vb)((0,l.b7)()));return(0,i.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("cur_dialog_info")||"");V(e)}catch(e){V({chat_scene:"",app_code:""})}},[]),(0,i.useEffect)(()=>{h(U[0])},[U,null==U?void 0:U.length]),(0,i.useEffect)(()=>{u&&O(u)},[u]),(0,n.jsx)(s.Provider,{value:{isContract:f,isMenuExpand:b,scene:g,chatId:E,model:v,modelList:U,dbParam:w||m,agent:L,setAgent:q,mode:P,setMode:z,setModel:h,setIsContract:_,setIsMenuExpand:y,setDbParam:k,history:C,setHistory:I,docId:A,setDocId:S,currentDialogInfo:D,setCurrentDialogInfo:V,adminList:x,refreshDialogList:M,dialogueList:G},children:p})},p=(0,i.createContext)(null),d=(0,i.createContext)(null)},47937:(e,t,a)=>{a.d(t,{yx:()=>s,A4:()=>p,oF:()=>o,F6:()=>r,nr:()=>g,UX:()=>u,sC:()=>d});var n=a(94936);a(7132);var l=a(81702);function o(){var e;let t=null!=(e=localStorage.getItem(l.yx))?e:"";try{return JSON.parse(t)}catch(e){return null}}function r(){try{var e;return JSON.parse(null!=(e=localStorage.getItem(l.Gm))?e:"").user_id}catch(e){return}}var i=a(49509);let s="__db_gpt_im_key",c=["mysql","duckdb","sqlite","postgresql","db2","spark","hive","bigquery","db2i","mariadb","tidb","n1ql","plsql","redshift","sql","trino","transactsql","singlestoredb","snowflake","tsql"];function p(e,t){if(!e)return"";try{let a=c.includes(t)?t:void 0;return(0,n.GP)(e,{language:a})}catch(t){return e}}let d=e=>{try{if(!e.startsWith("derisk-fs://"))return e;let t=new URL(e);if("derisk-fs:"!==t.protocol)return e;let a=t.pathname.split("/").filter(Boolean);if(a.length<2)return e;let n=a[0],l=a[1];return"".concat(i.env.NEXT_PUBLIC_API_BASE_URL||"","/api/v2/serve/file/files/").concat(n,"/").concat(l).concat(t.search)}catch(t){return console.error("Error transforming file URL:",t),e}},u=e=>e&&e.file_name?'\n```vis-attatch\n{"name": "'.concat(e.file_name,'", "type": "text_file", "url": "').concat(e.file_url,'" }\n```'):"",g=e=>{if(!e||null==e)return[];try{let t=e;if("string"==typeof e){let a=e.trim();t=a.startsWith("{")||a.startsWith("[")?JSON.parse(e):e}if(t&&!Array.isArray(t)&&"object"==typeof t)if(t.file_name||t.file_path){let e=t.file_name||"",a=t.file_path||t.url||"",n=/\.(jpg|jpeg|png|gif|bmp|webp|svg)$/i.test(e),l=/\.(mp3|wav|ogg|aac|flac|m4a)$/i.test(e),o=/\.(mp4|webm|mov|avi|wmv|flv|mkv)$/i.test(e);t=n?[{type:"image_url",image_url:{url:a,file_name:e}}]:l?[{type:"audio_url",audio_url:{url:a,file_name:e}}]:o?[{type:"video_url",video_url:{url:a,file_name:e}}]:[{type:"file_url",file_url:{url:a,file_name:e}}]}else t=[t];else if(!Array.isArray(t))return[];return t}catch(e){return console.error("Parse resourceValue error:",e),[]}}},81702:(e,t,a)=>{a.d(t,{uz:()=>n,yx:()=>r,Vp:()=>o,Mt:()=>l,Gm:()=>i,DO:()=>s});let n="user-id",l="__db_gpt_theme_key",o="__db_gpt_lng_key",r="__db_gpt_im_key",i="__db_gpt_uinfo_key",s="__db_gpt_uinfo_vt_key"},91070:(e,t,a)=>{a.d(t,{BR:()=>r,zo:()=>o,UK:()=>n.UK,rA:()=>n.rA,cE:()=>n.cE,V:()=>n.V});var n=a(39740),l=a(12115);let o=(0,l.createContext)({history:[],replyLoading:!1,scrollRef:{current:null},canAbort:!1,chartsData:[],agent:"",currentDialogue:{},appInfo:{},temperatureValue:.5,maxNewTokensValue:1024,resourceValue:{},chatInParams:[],setChatInParams:()=>{},modelValue:"",setModelValue:()=>{},setResourceValue:()=>{},setTemperatureValue:()=>{},setMaxNewTokensValue:()=>{},setAppInfo:()=>{},setAgent:()=>{},setCanAbort:()=>{},setReplyLoading:()=>{},refreshDialogList:()=>{},refreshHistory:()=>{},refreshAppInfo:()=>{},setHistory:()=>{},handleChat:()=>Promise.resolve(),isShowDetail:!0,setIsShowDetail:()=>{},isDebug:!1}),r=(0,l.createContext)({collapsed:!1,setCollapsed:()=>{},appInfo:{},setAppInfo:()=>{},refreshAppInfo:()=>{},refreshAppInfoLoading:!1,fetchUpdateApp:()=>{},fetchUpdateAppLoading:!1,setAssociationAgentModalOpen:()=>{},setAssociationKnowledgeModalOpen:()=>{},setAssociationSkillModalOpen:()=>{},chatId:"",setChatId:()=>{},refetchVersionData:()=>{},versionData:{},queryAppInfo:()=>{}})},92366:(e,t,a)=>{a.d(t,{$q:()=>o,BN:()=>c,Db:()=>p,Eg:()=>d,LU:()=>v,Nr:()=>u,PO:()=>g,PS:()=>f,Xr:()=>l,d_:()=>m,eH:()=>i,fy:()=>r,rW:()=>s,su:()=>_});var n=a(28867);let l=()=>(0,n.fG)("/api/v1/team-mode/list"),o=e=>(0,n.LO)("/api/v1/app/building/create",e),r=e=>(0,n.LO)("/api/v1/app/building/edit",e,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),i=e=>(0,n.LO)("/api/v1/app/list?page=".concat(e.page||1,"&page_size=").concat(e.page_size||12),e),s=()=>(0,n.fG)("/api/v1/llm-strategy/list"),c=e=>(0,n.fG)("/api/v1/app/resources/list?type=".concat(e.type,"&version=v2")),p=e=>(0,n.fG)("/api/v1/llm-strategy/value/list?type=".concat(e)),d=e=>(0,n.fG)("/api/v1/app/".concat(e,"/admins")),u=e=>(0,n.LO)("/api/v1/app/admins/update",e),g=()=>(0,n.fG)("/api/v1/serve/building/config/chat/out/modes"),m=()=>(0,n.fG)("/api/v1/serve/building/config/chat/in/params/all"),f=e=>(0,n.LO)("/api/v1/serve/building/config/chat/in/params/render",e),_=e=>(0,n.fG)("/api/v1/serve/building/config/list?app_code=".concat(e.app_code,"&page=",1,"&page_size=",100)),v=e=>(0,n.LO)("/api/v1/serve/app/publish",e)}}]);