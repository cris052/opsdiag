(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1049],{2785:()=>{},43539:(e,s,l)=>{"use strict";let a;l.r(s),l.d(s,{default:()=>eT});var t=l(95155),n=l(91070),i=l(64227),r=l(3377),c=l(44261),o=l(77133),d=l(12115),m=l(96194),u=l(16467),h=l(56939),x=l(98696),p=l(37974),j=l(77517),_=l(91218),A=l(45964),g=l.n(A),f=l(28867),b=l(84182),y=l(82940),N=l.n(y),v=l(35695),k=l(32570),w=l(32013);function C(e){var s;let{t:l}=(0,_.Bd)(),{handleStepChange:a,spaceConfig:n}=e,[i,r]=(0,d.useState)(!1),[c,o]=(0,d.useState)(),[m]=k.A.useForm();(0,d.useEffect)(()=>{m.setFieldValue("storage",null==n?void 0:n[0].name),o(null==n?void 0:n[0].name)},[n]);let p=async e=>{let{spaceName:s,owner:l,description:t,storage:n,field:i}=e;r(!0);let[c,o,d]=await (0,f.Vb)((0,f.CB)({name:s,vector_type:n,owner:l,desc:t,domain_type:i}));r(!1);let m="FinancialReport"===i;localStorage.setItem("cur_space_id",JSON.stringify(o)),(null==d?void 0:d.success)&&a({label:"forward",spaceName:s,pace:m?2:1,docType:m?"DOCUMENT":""})};return(0,t.jsx)(u.A,{spinning:i,children:(0,t.jsxs)(k.A,{form:m,size:"large",className:"mt-4",layout:"vertical",name:"basic",initialValues:{remember:!0},autoComplete:"off",onFinish:p,children:[(0,t.jsx)(k.A.Item,{label:l("Knowledge_Space_Name"),name:"spaceName",rules:[{required:!0,message:l("Please_input_the_name")},()=>({validator:(e,s)=>/[^\u4e00-\u9fa50-9a-zA-Z_-]/.test(s)?Promise.reject(Error(l("the_name_can_only_contain"))):Promise.resolve()})],children:(0,t.jsx)(h.A,{className:"h-12",placeholder:l("Please_input_the_name")})}),(0,t.jsx)(k.A.Item,{label:l("Storage"),name:"storage",rules:[{required:!0,message:l("Please_select_the_storage")}],children:(0,t.jsx)(w.A,{className:"mb-5 h-12",placeholder:l("Please_select_the_storage"),onChange:e=>{o(e)},children:null==n?void 0:n.map(e=>(0,t.jsx)(w.A.Option,{value:e.name,children:e.desc},e.name))})}),(0,t.jsx)(k.A.Item,{label:l("Domain"),name:"field",rules:[{required:!0,message:l("Please_select_the_domain_type")}],children:(0,t.jsx)(w.A,{className:"mb-5 h-12",placeholder:l("Please_select_the_domain_type"),children:null==n||null==(s=n.find(e=>e.name===c))?void 0:s.domain_types.map(e=>(0,t.jsx)(w.A.Option,{value:e.name,children:e.desc},e.name))})}),(0,t.jsx)(k.A.Item,{label:l("Description"),name:"description",rules:[{required:!0,message:l("Please_input_the_description")}],children:(0,t.jsx)(h.A,{className:"h-12",placeholder:l("Please_input_the_description")})}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(x.Ay,{type:"primary",htmlType:"submit",children:l("Next")})})]})})}var I=l(58206),S=l(83387),T=l(27514),E=l(94326),F=l(29300),q=l.n(F);let{Dragger:U}=T.A,{TextArea:D}=h.A;function P(e){let{className:s,handleStepChange:l,spaceName:a,docType:n}=e,{t:i}=(0,_.Bd)(),[r]=k.A.useForm(),[o,m]=(0,d.useState)(!1),[p,j]=(0,d.useState)([]),A=async e=>{let s,{docName:t,textSource:i,text:r,webPageUrl:c,doc_token:o,questions:d=[]}=e;switch(m(!0),n){case"URL":[,s]=await (0,f.Vb)((0,f.tI)(a,{doc_name:t,content:c,doc_type:"URL",questions:null==d?void 0:d.map(e=>e.question)}));break;case"TEXT":[,s]=await (0,f.Vb)((0,f.tI)(a,{doc_name:t,source:i,content:r,doc_type:"TEXT",questions:d.map(e=>e.question)}));break;case"YUQUEURL":[,s]=await (0,f.Vb)((0,f.Ty)({doc_name:t,space_name:a,content:c,doc_type:"YUQUEURL",doc_token:o||"",questions:null==d?void 0:d.map(e=>e.question)}))}if(m(!1),"DOCUMENT"===n&&p.length<1||"DOCUMENT"!==n&&!s)return E.Ay.error("Upload failed, please re-upload.");let u=p;if("DOCUMENT"===n){let s=Array.from(e.originFileObj.fileList);u=u.filter(e=>s.some(s=>s.name===e.name))}l({label:"forward",files:"DOCUMENT"===n?u:[{name:t,doc_id:s||-1}]})},g=e=>{let{fileList:s}=e;0===s.length&&r.setFieldValue("originFileObj",null)},b=async e=>{let{onSuccess:s,onError:l,file:t}=e,n=new FormData,i=null==t?void 0:t.name;n.append("doc_name",i),n.append("doc_file",t),n.append("doc_type","DOCUMENT");let[,r]=await (0,f.Vb)((0,f.XX)(a,n));Number.isInteger(r)?(s&&s(r||0),j(e=>(e.push({name:i,doc_id:r||-1}),e))):l&&l({name:"",message:""})};return(0,t.jsx)(u.A,{spinning:o,children:(0,t.jsxs)(k.A,{form:r,size:"large",className:q()("mt-4",s),layout:"vertical",name:"basic",initialValues:{remember:!0},autoComplete:"off",onFinish:A,children:[(()=>{switch(n){case"URL":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A.Item,{label:"".concat(i("Name"),":"),name:"docName",rules:[{required:!0,message:i("Please_input_the_name")}],children:(0,t.jsx)(h.A,{className:"mb-5 h-12",placeholder:i("Please_input_the_name")})}),(0,t.jsx)(k.A.Item,{label:"".concat(i("Web_Page_URL"),":"),name:"webPageUrl",rules:[{required:!0,message:i("Please_input_the_Web_Page_URL")}],children:(0,t.jsx)(h.A,{className:"mb-5  h-12",placeholder:i("Please_input_the_Web_Page_URL")})}),(0,t.jsx)(k.A.Item,{label:"".concat(i("Correlation_problem"),":"),children:(0,t.jsx)(k.A.List,{name:"questions",children:(e,s)=>{let{add:l,remove:a}=s;return(0,t.jsxs)(t.Fragment,{children:[e.map(e=>{let{key:s,name:l}=e;return(0,t.jsxs)("div",{className:q()("flex flex-1 items-center gap-8 mb-6"),children:[(0,t.jsx)(k.A.Item,{label:"",name:[l,"question"],className:"grow",children:(0,t.jsx)(h.A,{placeholder:i("input_question")})}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(I.A,{onClick:()=>{a(l)}})})]},s)}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(x.Ay,{type:"dashed",onClick:()=>{l()},block:!0,icon:(0,t.jsx)(c.A,{}),children:i("Add_problem")})})]})}})})]});case"DOCUMENT":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A.Item,{name:"originFileObj",rules:[{required:!0,message:i("Please_select_file")}],children:(0,t.jsxs)(U,{multiple:!0,onChange:g,maxCount:100,accept:".pdf,.ppt,.pptx,.doc,.docx,.txt,.md,.zip,.csv",customRequest:b,children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon",children:(0,t.jsx)(S.A,{})}),(0,t.jsx)("p",{style:{color:"rgb(22, 108, 255)",fontSize:"20px"},children:i("Select_or_Drop_file")}),(0,t.jsx)("p",{className:"ant-upload-hint",style:{color:"rgb(22, 108, 255)"},children:"PDF, PowerPoint, Word, Text, Markdown, Zip1, Csv"})]})}),(0,t.jsx)(k.A.Item,{label:"关联问题:",children:(0,t.jsx)(k.A.List,{name:"questions",children:(e,s)=>{let{add:l,remove:a}=s;return(0,t.jsxs)(t.Fragment,{children:[e.map(e=>{let{key:s,name:l}=e;return(0,t.jsxs)("div",{className:q()("flex flex-1 items-center gap-8 mb-6"),children:[(0,t.jsx)(k.A.Item,{label:"",name:[l,"question"],className:"grow",children:(0,t.jsx)(h.A,{placeholder:"请输入问题"})}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(I.A,{onClick:()=>{a(l)}})})]},s)}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(x.Ay,{type:"dashed",onClick:()=>{l()},block:!0,icon:(0,t.jsx)(c.A,{}),children:i("Add_problem")})})]})}})})]});case"YUQUEURL":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A.Item,{label:"".concat(i("Name"),":"),name:"docName",rules:[{required:!0,message:i("Please_input_the_name")}],children:(0,t.jsx)(h.A,{className:"mb-5 h-12",placeholder:i("Please_input_the_name")})}),(0,t.jsx)(k.A.Item,{label:i("document_url"),name:"webPageUrl",rules:[{required:!0,message:i("input_document_url")}],children:(0,t.jsx)(h.A,{className:"mb-5  h-12",placeholder:i("input_document_url")})}),(0,t.jsx)(k.A.Item,{label:i("document_token"),name:"doc_token",tooltip:(0,t.jsx)(t.Fragment,{children:i("Get_token")}),children:(0,t.jsx)(h.A,{className:"mb-5  h-12",placeholder:i("input_document_token")})}),(0,t.jsx)(k.A.Item,{label:"".concat(i("Correlation_problem"),":"),children:(0,t.jsx)(k.A.List,{name:"questions",children:(e,s)=>{let{add:l,remove:a}=s;return(0,t.jsxs)(t.Fragment,{children:[e.map(e=>{let{key:s,name:l}=e;return(0,t.jsxs)("div",{className:q()("flex flex-1 items-center gap-8 mb-6"),children:[(0,t.jsx)(k.A.Item,{label:"",name:[l,"question"],className:"grow",children:(0,t.jsx)(h.A,{placeholder:i("input_question")})}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(I.A,{onClick:()=>{a(l)}})})]},s)}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(x.Ay,{type:"dashed",onClick:()=>{l()},block:!0,icon:(0,t.jsx)(c.A,{}),children:i("Add_problem")})})]})}})})]});default:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A.Item,{label:"".concat(i("Name"),":"),name:"docName",rules:[{required:!0,message:i("Please_input_the_name")}],children:(0,t.jsx)(h.A,{className:"mb-5 h-12",placeholder:i("Please_input_the_name")})}),(0,t.jsx)(k.A.Item,{label:"".concat(i("Text_Source"),":"),name:"textSource",rules:[{required:!0,message:i("Please_input_the_text_source")}],children:(0,t.jsx)(h.A,{className:"mb-5  h-12",placeholder:i("Please_input_the_text_source")})}),(0,t.jsx)(k.A.Item,{label:"".concat(i("Text"),":"),name:"text",rules:[{required:!0,message:i("Please_input_the_description")}],children:(0,t.jsx)(D,{rows:4})}),(0,t.jsx)(k.A.Item,{label:"".concat(i("Correlation_problem"),":"),children:(0,t.jsx)(k.A.List,{name:"questions",children:(e,s)=>{let{add:l,remove:a}=s;return(0,t.jsxs)(t.Fragment,{children:[e.map(e=>{let{key:s,name:l}=e;return(0,t.jsxs)("div",{className:q()("flex flex-1 items-center gap-8 mb-6"),children:[(0,t.jsx)(k.A.Item,{label:"",name:[l,"question"],className:"grow",children:(0,t.jsx)(h.A,{placeholder:i("input_question")})}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(I.A,{onClick:()=>{a(l)}})})]},s)}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(x.Ay,{type:"dashed",onClick:()=>{l()},block:!0,icon:(0,t.jsx)(c.A,{}),children:i("Add_problem")})})]})}})})]})}})(),(0,t.jsxs)(k.A.Item,{children:[(0,t.jsx)(x.Ay,{onClick:()=>{l({label:"back"})},className:"mr-4",children:"".concat(i("Back"))}),(0,t.jsx)(x.Ay,{type:"primary",loading:o,htmlType:"submit",children:i("Next")})]})]})})}var V=l(6124),R=l(50573),O=l(32430),L=l(59540),z=l(75606);function M(e){let{type:s}=e;return"TEXT"===s?(0,t.jsx)(R.A,{className:"text-[#2AA3FF] mr-2 !text-lg"}):"DOCUMENT"===s?(0,t.jsx)(O.A,{className:"text-[#2AA3FF] mr-2 !text-lg"}):"YUQUEURL"===s?(0,t.jsx)(L.A,{className:"text-[#2AA3FF] mr-2 !text-lg"}):(0,t.jsx)(z.A,{className:"text-[#2AA3FF] mr-2 !text-lg"})}function B(e){let{t:s}=(0,_.Bd)(),{handleStepChange:l}=e,a=[{type:"TEXT",title:s("Text"),subTitle:s("Fill your raw text"),iconType:"TEXT"},{type:"URL",title:s("URL"),subTitle:s("Fetch_the_content_of_a_URL"),iconType:"WEBPAGE"},{type:"DOCUMENT",title:s("Document"),subTitle:s("Upload_a_document"),iconType:"DOCUMENT"},{type:"YUQUEURL",title:s("yuque"),subTitle:s("Get_yuque_document"),iconType:"YUQUEURL"}];return(0,t.jsx)(t.Fragment,{children:a.map((e,s)=>(0,t.jsxs)(V.A,{className:"mt-4 mb-4 cursor-pointer",onClick:()=>{l({label:"forward",docType:e.type})},children:[(0,t.jsxs)("div",{className:"font-semibold",children:[(0,t.jsx)(M,{type:e.iconType}),e.title]}),(0,t.jsx)("div",{children:e.subTitle})]},s))})}var G=l(24553),H=l(96848),Y=l(94481),K=l(5813),W=l(76174),X=l(21103),Q=l(40344);let{TextArea:J}=h.A;function Z(e){let{strategies:s,docType:l,fileName:a,field:n}=e,[i,r]=(0,d.useState)(),c="";if("DOCUMENT"===l){let e=a.split(".");c=e[e.length-1]}let o=c?s.filter(e=>e.suffix.indexOf(c)>-1):s,{t:m}=(0,_.Bd)(),u={strategy:"Automatic",name:m("Automatic"),desc:m("Automatic_desc")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A.Item,{name:[n.name,"chunk_parameters","chunk_strategy"],initialValue:u.strategy,children:(0,t.jsxs)(Q.Ay.Group,{style:{marginTop:16},onChange:function(e){r(e.target.value)},children:[(0,t.jsx)(Q.Ay,{value:u.strategy,children:u.name}),o.map(e=>(0,t.jsx)(Q.Ay,{value:e.strategy,children:e.name},"strategy_radio_".concat(e.strategy)))]})}),function(){var e;if(!i)return null;if(i===u.name)return(0,t.jsx)("p",{className:"my-4",children:u.desc});let s=null==o||null==(e=o.filter(e=>e.strategy===i)[0])?void 0:e.parameters;return s&&s.length?(0,t.jsx)("div",{className:"mt-2",children:null==s?void 0:s.map(e=>(0,t.jsx)(k.A.Item,{label:e.param_name,name:[n.name,"chunk_parameters",e.param_name],rules:[{required:!0,message:m("Please_input_the_name")}],initialValue:e.default_value,valuePropName:"boolean"===e.param_type?"checked":"value",tooltip:e.description,children:function(e){switch(e){case"int":return(0,t.jsx)(W.A,{className:"w-full",min:1});case"string":return(0,t.jsx)(J,{className:"w-full",rows:2});case"boolean":return(0,t.jsx)(X.A,{})}}(e.param_type)},"param_".concat(e.param_name)))}):(0,t.jsx)(Y.A,{className:"my-2",type:"warning",message:m("No_parameter")})}()]})}function $(e){let{spaceName:s,docType:l,uploadFiles:n,handleStepChange:i}=e,{t:r}=(0,_.Bd)(),[c]=k.A.useForm(),[o,m]=(0,d.useState)(n),[h,p]=(0,d.useState)(),[j,A]=(0,d.useState)([]),[g,b]=(0,d.useState)("");async function y(){var e;p(!0);let[,s]=await (0,f.Vb)((0,f.RI)());p(!1),A(null==(e=s||[])?void 0:e.filter(e=>e.type.indexOf(l)>-1))}(0,d.useEffect)(()=>(y(),()=>{a&&clearInterval(a)}),[]);let N=async e=>{if(function(e){let s=!0;"RUNNING"===g&&(s=!1,E.Ay.warning("The task is still running, do not submit it again."));let{fileStrategies:l}=e;return l.map(e=>{var l,a;let t=(null==e||null==(l=e.chunk_parameters)?void 0:l.chunk_strategy)||"Automatic";t||(E.Ay.error("Please select chunk strategy for ".concat(e.name,".")),s=!1);let n=j.filter(e=>e.strategy===t)[0],i={chunk_strategy:(null==e||null==(a=e.chunk_parameters)?void 0:a.chunk_strategy)||"Automatic"};n&&n.parameters&&n.parameters.forEach(s=>{let l=s.param_name;i[l]=(null==e?void 0:e.chunk_parameters)[l]}),e.chunk_parameters=i}),s}(e)){var l;p(!0);let[,t]=await (0,f.Vb)((0,f.Z9)(s,e.fileStrategies));if(p(!1),(null==t?void 0:t.tasks)&&(null==t||null==(l=t.tasks)?void 0:l.length)>0){E.Ay.success("Segemation task start successfully. task id: ".concat(null==t?void 0:t.tasks.join(","))),b("RUNNING");let s=e.fileStrategies.map(e=>e.doc_id);a=setInterval(async()=>{let e=await v(s);"FINISHED"===e?(clearInterval(a),b("FINISHED"),E.Ay.success("Congratulation, All files sync successfully."),i({label:"finish"})):"FAILED"===e&&(clearInterval(a),i({label:"finish"}))},3e3)}}};async function v(e){let[,l]=await (0,f.Vb)((0,f.ME)(s,{doc_ids:e}));if((null==l?void 0:l.data)&&(null==l?void 0:l.data.length)>0){let e=[...o];if(null==l||l.data.map(s=>{var l;let a=null==e||null==(l=e.filter(e=>e.doc_id===s.id))?void 0:l[0];a&&(a.status=s.status)}),m(e),null==l?void 0:l.data.every(e=>"FINISHED"===e.status||"FAILED"===e.status))return"FINISHED"}}return(0,t.jsx)(u.A,{spinning:h,children:(0,t.jsxs)(k.A,{labelCol:{span:6},wrapperCol:{span:18},labelAlign:"right",form:c,size:"large",className:"mt-4",layout:"horizontal",name:"basic",autoComplete:"off",initialValues:{fileStrategies:o},onFinish:N,children:[j&&j.length?(0,t.jsx)(k.A.List,{name:"fileStrategies",children:e=>{switch(l){case"TEXT":case"URL":case"YUQUEURL":return null==e?void 0:e.map(e=>(0,t.jsx)(Z,{strategies:j,docType:l,fileName:o[e.name].name,field:e},e.key));case"DOCUMENT":return(0,t.jsx)(K.A,{defaultActiveKey:0,size:o.length>5?"small":"middle",children:null==e?void 0:e.map(e=>(0,t.jsx)(K.A.Panel,{header:"".concat(e.name+1,". ").concat(o[e.name].name),extra:function(e){switch(o[e].status){case"FINISHED":return(0,t.jsx)(H.A,{component:G.eq});case"RUNNING":return(0,t.jsx)(H.A,{className:"animate-spin animate-infinite",component:G.Fj});case"FAILED":return(0,t.jsx)(H.A,{component:G.f6});default:return(0,t.jsx)(H.A,{component:G.tU})}}(e.name),children:(0,t.jsx)(Z,{strategies:j,docType:l,fileName:o[e.name].name,field:e})},e.key))})}}}):(0,t.jsx)(Y.A,{message:"Cannot find one strategy for ".concat(l," type knowledge."),type:"warning"}),(0,t.jsxs)(k.A.Item,{className:"mt-4",children:[(0,t.jsx)(x.Ay,{onClick:()=>{i({label:"back"})},className:"mr-4",children:"".concat(r("Back"))}),(0,t.jsx)(x.Ay,{type:"primary",htmlType:"submit",loading:h||"RUNNING"===g,children:r("Process")})]})]})})}var ee=l(53867),es=l(60924),el=l(47562),ea=l(13993),et=l(18610),en=l(81106),ei=l(49636),er=l(44641),ec=l(3475),eo=l(54099),ed=l(97226),em=l(97540),eu=l(82343),eh=l(36768),ex=l(94600),ep=l(92611),ej=l(56200),e_=l(40102);let eA=e=>{let{open:s,setOpen:l,space:a}=e,[n]=k.A.useForm(),[i]=k.A.useForm(),{run:r}=(0,eo.A)(async()=>{let[,e]=await (0,f.Vb)((0,f.Cf)(a.name+""));return null!=e?e:[]},{manual:!0}),{data:c=[],run:o}=(0,eo.A)(async()=>{let[,e]=await (0,f.Vb)((0,f.T1)(a.name+""));return null!=e?e:[]},{manual:!0,onSuccess:e=>{i.setFieldValue("recall_retrievers",e)}});(0,d.useEffect)(()=>{s&&o()},[s,o,r]);let{run:j,data:_=[],loading:A}=(0,eo.A)(async e=>{let[,s]=await (0,f.Vb)((0,f.K8)({...e},a.name+""));return null!=s?s:[]},{manual:!0}),g=async()=>{n.validateFields().then(async e=>{let s=i.getFieldsValue();await j({recall_top_k:1,recall_retrievers:c,...e,...s})})};return(0,t.jsxs)(m.A,{title:"召回测试",width:"60%",open:s,footer:!1,onCancel:()=>l(!1),centered:!0,destroyOnHidden:!0,children:[(0,t.jsx)(V.A,{title:"召回配置",size:"small",className:"my-4",extra:(0,t.jsx)(ej.A,{placement:"bottomRight",trigger:"hover",title:"向量检索设置",content:(0,t.jsxs)(k.A,{form:i,initialValues:{recall_top_k:1},children:[(0,t.jsx)(k.A.Item,{label:"Topk",tooltip:"基于相似度得分的前 k 个向量",name:"recall_top_k",children:(0,t.jsx)(W.A,{placeholder:"请输入",className:"w-full"})}),(0,t.jsx)(k.A.Item,{label:"召回方法",name:"recall_retrievers",children:(0,t.jsx)(w.A,{mode:"multiple",options:c.map(e=>({label:e,value:e})),className:"w-full",allowClear:!0,disabled:!0})}),(0,t.jsx)(k.A.Item,{label:"score阈值",name:"recall_score_threshold",children:(0,t.jsx)(W.A,{placeholder:"请输入",className:"w-full",step:.1})})]}),children:(0,t.jsx)(ep.A,{className:"text-lg"})}),children:(0,t.jsx)(k.A,{form:n,layout:"vertical",onFinish:g,children:(0,t.jsx)(k.A.Item,{label:"测试问题",required:!0,name:"question",rules:[{required:!0,message:"请输入测试问题"}],className:"m-0 p-0",children:(0,t.jsxs)("div",{className:"flex w-full items-center gap-8",children:[(0,t.jsx)(h.A,{placeholder:"请输入测试问题",autoComplete:"off",allowClear:!0,className:"w-1/2"}),(0,t.jsx)(x.Ay,{type:"primary",htmlType:"submit",children:"测试"})]})})})}),(0,t.jsx)(V.A,{title:"召回结果",size:"small",children:(0,t.jsx)(u.A,{spinning:A,children:_.length>0?(0,t.jsx)("div",{className:"flex flex-col overflow-y-auto",style:{height:"45vh"},children:_.map(e=>(0,t.jsx)(V.A,{title:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)(p.A,{color:"blue",children:["# ",e.chunk_id]}),e.metadata.source]}),extra:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-semibold",children:"score:"}),(0,t.jsx)("span",{className:"text-blue-500",children:e.score})]}),size:"small",className:"mb-4 border-gray-500 shadow-md",children:(0,t.jsx)(e_.default,{children:e.content})},e.chunk_id))}):(0,t.jsx)(eh.A,{})})})]})};var eg=l(19361),ef=l(74947),eb=l(23512),ey=l(47739),eN=l(52917),ev=l(25953);let{TextArea:ek}=h.A;function ew(e){let{space:s,argumentsShow:l,setArgumentsShow:a}=e,{t:n}=(0,_.Bd)(),[i,r]=(0,d.useState)(),[c,o]=(0,d.useState)(!1),p=async()=>{let[e,l]=await (0,f.Vb)((0,f.lw)(s.name));r(l)};(0,d.useEffect)(()=>{p()},[s.name]);let j=[{key:"Embedding",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.A,{}),n("Embedding")]}),children:(0,t.jsxs)(eg.A,{gutter:24,children:[(0,t.jsx)(ef.A,{span:12,offset:0,children:(0,t.jsx)(k.A.Item,{tooltip:n("the_top_k_vectors"),rules:[{required:!0}],label:n("topk"),name:["embedding","topk"],children:(0,t.jsx)(h.A,{className:"mb-5 h-12"})})}),(0,t.jsx)(ef.A,{span:12,children:(0,t.jsx)(k.A.Item,{tooltip:n("Set_a_threshold_score"),rules:[{required:!0}],label:n("recall_score"),name:["embedding","recall_score"],children:(0,t.jsx)(h.A,{className:"mb-5  h-12",placeholder:"请输入"})})}),(0,t.jsx)(ef.A,{span:12,children:(0,t.jsx)(k.A.Item,{tooltip:n("recall_type"),rules:[{required:!0}],label:n("recall_type"),name:["embedding","recall_type"],children:(0,t.jsx)(h.A,{className:"mb-5  h-12"})})}),(0,t.jsx)(ef.A,{span:12,children:(0,t.jsx)(k.A.Item,{tooltip:n("A_model_used"),rules:[{required:!0}],label:n("model"),name:["embedding","model"],children:(0,t.jsx)(h.A,{className:"mb-5  h-12"})})}),(0,t.jsx)(ef.A,{span:12,children:(0,t.jsx)(k.A.Item,{tooltip:n("The_size_of_the_data_chunks"),rules:[{required:!0}],label:n("chunk_size"),name:["embedding","chunk_size"],children:(0,t.jsx)(h.A,{className:"mb-5  h-12"})})}),(0,t.jsx)(ef.A,{span:12,children:(0,t.jsx)(k.A.Item,{tooltip:n("The_amount_of_overlap"),rules:[{required:!0}],label:n("chunk_overlap"),name:["embedding","chunk_overlap"],children:(0,t.jsx)(h.A,{className:"mb-5  h-12",placeholder:n("Please_input_the_description")})})})]})},{key:"Prompt",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(eN.A,{}),n("Prompt")]}),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A.Item,{tooltip:n("A_contextual_parameter"),label:n("scene"),name:["prompt","scene"],children:(0,t.jsx)(ek,{rows:4,className:"mb-2"})}),(0,t.jsx)(k.A.Item,{tooltip:n("structure_or_format"),label:n("template"),name:["prompt","template"],children:(0,t.jsx)(ek,{rows:7,className:"mb-2"})}),(0,t.jsx)(k.A.Item,{tooltip:n("The_maximum_number_of_tokens"),label:n("max_token"),name:["prompt","max_token"],children:(0,t.jsx)(h.A,{className:"mb-2"})})]})},{key:"Summary",label:(0,t.jsxs)("div",{children:[(0,t.jsx)(ev.A,{}),n("Summary")]}),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A.Item,{rules:[{required:!0}],label:n("max_iteration"),name:["summary","max_iteration"],children:(0,t.jsx)(h.A,{className:"mb-2"})}),(0,t.jsx)(k.A.Item,{rules:[{required:!0}],label:n("concurrency_limit"),name:["summary","concurrency_limit"],children:(0,t.jsx)(h.A,{className:"mb-2"})})]})}],A=async e=>{o(!0);let[,,l]=await (0,f.Vb)((0,f.GE)(s.name,{argument:JSON.stringify(e)}));o(!1),(null==l?void 0:l.success)&&a(!1)};return(0,t.jsx)(m.A,{width:850,open:l,onCancel:()=>{a(!1)},footer:null,children:(0,t.jsx)(u.A,{spinning:c,children:(0,t.jsxs)(k.A,{size:"large",className:"mt-4",layout:"vertical",name:"basic",initialValues:{...i},autoComplete:"off",onFinish:A,children:[(0,t.jsx)(eb.A,{items:j}),(0,t.jsxs)("div",{className:"mt-3 mb-3",children:[(0,t.jsx)(x.Ay,{htmlType:"submit",type:"primary",className:"mr-6",children:n("Submit")}),(0,t.jsx)(x.Ay,{onClick:()=>{a(!1)},children:n("close")})]})]})})})}let{confirm:eC}=m.A,eI=e=>{let{name:s,id:l}=e,[a,n]=(0,d.useState)(!1),{t:i}=(0,_.Bd)(),r=async(e,s)=>{var l;n(!0);let a=await (0,f.Vb)((0,f.Ps)(e,{doc_ids:[s]}));n(!1),(null==(l=a[2])?void 0:l.success)&&E.Ay.success(i("Synchronization_initiated"))};return a?(0,t.jsx)(u.A,{indicator:(0,t.jsx)(ee.A,{spin:!0})}):(0,t.jsxs)(ed.A,{onClick:()=>{r(s,l)},children:[(0,t.jsx)(es.A,{}),(0,t.jsx)("span",{children:i("Sync")})]})};function eS(e){var s;let[l]=k.A.useForm(),{space:a,addStatus:n}=e,{t:o}=(0,_.Bd)(),j=(0,v.useRouter)(),[A,g]=(0,d.useState)([]),[b,y]=(0,d.useState)([]),[w,C]=(0,d.useState)(!1),[S,T]=(0,d.useState)(0),[F,U]=(0,d.useState)(!1),[D,P]=(0,d.useState)(),[R,O]=(0,d.useState)(!1),L=(0,d.useRef)(1),z=(0,d.useMemo)(()=>(null==A?void 0:A.length)<S,[A,S]),{run:B,refresh:G,loading:H}=(0,eo.A)(async()=>await (0,f.Vb)((0,f.ME)(a.name,{page:L.current,page_size:18})),{manual:!0,onSuccess:e=>{let[,s]=e;g(null==s?void 0:s.data),y(null==s?void 0:s.data),T((null==s?void 0:s.total)||0)}}),Y=async()=>{if(!z)return;L.current+=1;let[e,s]=await (0,f.Vb)((0,f.ME)(a.name,{page:L.current,page_size:18}));g([...A,...s.data]),y([...A,...s.data])},K=async s=>{await (0,f.Vb)((0,f.Tu)(a.name,{doc_name:s.doc_name})),B(),e.onDeleteDoc()},W=()=>{e.onAddDoc(a.name)};(0,d.useEffect)(()=>{B()},[]),(0,d.useEffect)(()=>{"finish"===n&&B()},[n]);let{run:X,loading:Q}=(0,eo.A)(async(e,s)=>{let[,l]=await (0,f.Vb)((0,f.V6)(a.name,{doc_name:s}));return l},{manual:!0,debounceWait:500,onSuccess:e=>{y(null==e?void 0:e.data)}}),{run:J,loading:Z}=(0,eo.A)(async s=>{var l;return await (0,f.mr)(e.space.name,{questions:null==(l=s.questions)?void 0:l.map(e=>e.question),doc_id:(null==D?void 0:D.id)||"",doc_name:s.doc_name})},{manual:!0,onSuccess:async e=>{e.data.success?(E.Ay.success(o("Edit_Success")),await B(),U(!1)):E.Ay.error(e.data.err_msg)}});return(0,d.useEffect)(()=>{var e;D&&l.setFieldsValue({doc_name:D.doc_name,questions:null==(e=D.questions)?void 0:e.map(e=>({question:e}))})},[D,l]),(0,t.jsxs)("div",{className:"px-4",children:[(0,t.jsxs)(ed.A,{children:[(0,t.jsx)(x.Ay,{size:"middle",type:"primary",className:"flex items-center",icon:(0,t.jsx)(c.A,{}),onClick:W,children:o("Add_Datasource")}),(0,t.jsx)(x.Ay,{size:"middle",className:"flex items-center mx-2",icon:(0,t.jsx)(ei.A,{}),onClick:()=>{C(!0)},children:"Arguments"}),"KnowledgeGraph"===a.vector_type&&(0,t.jsx)(x.Ay,{size:"middle",className:"flex items-center mx-2",icon:(0,t.jsx)(er.A,{}),onClick:()=>{j.push("/knowledge/graph/?spaceName=".concat(a.name))},children:o("View_Graph")}),(0,t.jsx)(x.Ay,{icon:(0,t.jsx)(ec.A,{}),onClick:()=>O(!0),children:o("Recall_test")})]}),(0,t.jsx)(ex.A,{}),(0,t.jsx)(u.A,{spinning:H,children:(0,t.jsxs)("div",{className:"w-full h-full",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("div",{className:"flex w-full justify-end",children:(0,t.jsx)(x.Ay,{type:"primary",onClick:async()=>{await G()},loading:H,children:o("Refresh_status")})})}),(0,t.jsx)("div",{className:"flex flex-col h-full p-3 border rounded-md",children:(null==A?void 0:A.length)>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-1 justify-between items-center",children:(0,t.jsx)(h.A,{className:"w-1/3",prefix:(0,t.jsx)(r.A,{}),placeholder:o("please_enter_the_keywords"),onChange:async e=>{await X(a.id,e.target.value)},allowClear:!0})}),(0,t.jsxs)(u.A,{spinning:Q,children:[(0,t.jsx)(t.Fragment,{children:b.length>0?(0,t.jsx)("div",{className:"h-96 mt-3 grid grid-cols-3 gap-x-6 gap-y-5 overflow-y-auto",children:b.map(e=>(0,t.jsxs)(V.A,{className:" dark:bg-[#484848] relative  shrink-0 grow-0 cursor-pointer rounded-[10px] border border-gray-200 border-solid w-full max-h-64",title:(0,t.jsx)(em.A,{title:e.doc_name,children:(0,t.jsxs)("div",{className:"truncate ",children:[(0,t.jsx)(M,{type:e.doc_type}),(0,t.jsx)("span",{children:e.doc_name})]})}),extra:(0,t.jsx)(eu.A,{menu:{items:[{key:"publish",label:(0,t.jsxs)(ed.A,{onClick:()=>{j.push("/construct/knowledge/chunk/?spaceName=".concat(a.name,"&id=").concat(e.id))},children:[(0,t.jsx)(el.A,{}),(0,t.jsx)("span",{children:o("detail")})]})},{key:"".concat(o("Sync")),label:(0,t.jsx)(eI,{name:a.name,id:e.id})},{key:"edit",label:(0,t.jsxs)(ed.A,{onClick:()=>{U(!0),P(e)},children:[(0,t.jsx)(ea.A,{}),(0,t.jsx)("span",{children:o("Edit")})]})},{key:"del",label:(0,t.jsxs)(ed.A,{onClick:()=>{eC({title:o("Tips"),icon:(0,t.jsx)(i.A,{}),content:"".concat(o("Del_Document_Tips"),"?"),okText:"Yes",okType:"danger",cancelText:"No",async onOk(){await K(e)}})},children:[(0,t.jsx)(et.A,{}),(0,t.jsx)("span",{children:o("Delete")})]})}]},getPopupContainer:e=>e.parentNode,placement:"bottomRight",autoAdjustOverflow:!1,className:"rounded-md",children:(0,t.jsx)(en.A,{className:"p-2"})}),children:[(0,t.jsxs)("p",{className:"mt-2 font-semibold ",children:[o("Size"),":"]}),(0,t.jsxs)("p",{children:[e.chunk_size," chunks"]}),(0,t.jsxs)("p",{className:"mt-2 font-semibold ",children:[o("Last_Sync"),":"]}),(0,t.jsx)("p",{children:N()(e.last_sync).format("YYYY-MM-DD HH:MM:SS")}),(0,t.jsx)("p",{className:"mt-2 mb-2",children:((e,s)=>{let l;switch(e){case"TODO":l="gold";break;case"RUNNING":l="#2db7f5";break;case"FINISHED":l="cyan";break;default:l="red"}return(0,t.jsx)(em.A,{title:s,children:(0,t.jsx)(p.A,{color:l,children:e})})})(e.status,e.result)})]},e.id))}):(0,t.jsx)(eh.A,{className:"flex flex-1 w-full py-10 flex-col items-center justify-center",image:eh.A.PRESENTED_IMAGE_DEFAULT})}),z&&(0,t.jsx)(ex.A,{children:(0,t.jsx)("span",{className:"cursor-pointer",onClick:Y,children:o("Load_more")})})]})]}):(0,t.jsx)(eh.A,{image:eh.A.PRESENTED_IMAGE_DEFAULT,children:(0,t.jsx)(x.Ay,{type:"primary",className:"flex items-center mx-auto",icon:(0,t.jsx)(c.A,{}),onClick:W,children:"Create Now"})})})]})}),(0,t.jsx)(ew,{space:a,argumentsShow:w,setArgumentsShow:C}),(0,t.jsx)(m.A,{title:o("Edit_document"),open:F,onCancel:()=>U(!1),destroyOnHidden:!0,footer:[(0,t.jsx)(x.Ay,{onClick:()=>U(!1),children:o("cancel")},"back"),(0,t.jsx)(x.Ay,{type:"primary",loading:Z,onClick:async()=>{let e=l.getFieldsValue();await J(e)},children:o("verify")},"submit")],children:(0,t.jsxs)(k.A,{form:l,initialValues:{doc_name:null==D?void 0:D.doc_name,questions:null==D||null==(s=D.questions)?void 0:s.map(e=>({question:e}))},children:[(0,t.jsx)(k.A.Item,{label:o("Document_name"),name:"doc_name",children:(0,t.jsx)(h.A,{})}),(0,t.jsx)(k.A.Item,{label:o("Correlation_problem"),children:(0,t.jsx)(k.A.List,{name:"questions",children:(e,s)=>{let{add:l,remove:a}=s;return(0,t.jsxs)(t.Fragment,{children:[e.map(e=>{let{key:s,name:l}=e;return(0,t.jsxs)("div",{className:q()("flex flex-1 items-center gap-8 mb-6"),children:[(0,t.jsx)(k.A.Item,{label:"",name:[l,"question"],className:"grow",children:(0,t.jsx)(h.A,{placeholder:"请输入"})}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(I.A,{onClick:()=>{a(l)}})})]},s)}),(0,t.jsx)(k.A.Item,{children:(0,t.jsx)(x.Ay,{type:"dashed",onClick:()=>{l({question:"",valid:!1})},block:!0,icon:(0,t.jsx)(c.A,{}),children:o("Add_problem")})})]})}})})]})}),(0,t.jsx)(eA,{open:R,setOpen:O,space:a})]})}function eT(){let{setCurrentDialogInfo:e}=(0,d.useContext)(n.UK),[s,l]=(0,d.useState)([]),[a,A]=(0,d.useState)(!1),[y,k]=(0,d.useState)(!1),[w,I]=(0,d.useState)(),[S,T]=(0,d.useState)(0),[E,F]=(0,d.useState)(""),[U,D]=(0,d.useState)([]),[V,R]=(0,d.useState)(""),[O,L]=(0,d.useState)(""),[z,M]=(0,d.useState)(!1),[G,H]=(0,d.useState)(null),{t:Y}=(0,_.Bd)(),K=[{title:Y("Knowledge_Space_Config")},{title:Y("Choose_a_Datasource_type")},{title:Y("Upload")},{title:Y("Segmentation")}],W=(0,v.useRouter)();async function X(e){M(!0);let[s,a]=await (0,f.Vb)((0,f.Hy)({...e}));M(!1),l(a)}async function Q(){let[e,s]=await (0,f.Vb)((0,f.zx)());if(!s)return null;H(s.storage)}(0,d.useEffect)(()=>{X(),Q()},[]);let J=async e=>{let[s,l]=await (0,f.Vb)((0,f.j_)({app_code:"chat_knowledge"}));(null==l?void 0:l.conv_uid)&&W.push("/chat?conv_uid=".concat(l.conv_uid,"&app_code=chat_knowledge&knowledge=").concat(e.knowledge_id))},Z=e=>{let{label:s,spaceName:l,docType:a,files:t}=e;"finish"===s?(A(!1),X(),F(""),R(""),L("finish"),localStorage.removeItem("cur_space_id")):"forward"===s?(0===S&&X(),T(e=>e+1)):T(e=>e-1),t&&D(t),l&&F(l),a&&R(a)},ee=async e=>{X({name:e.target.value})};return(0,t.jsxs)(u.A,{spinning:z,children:[(0,t.jsxs)("div",{className:"page-body p-4 md:p-6 h-screen ",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(h.A,{variant:"filled",prefix:(0,t.jsx)(r.A,{}),placeholder:Y("please_enter_the_keywords"),onChange:g()(ee,300),allowClear:!0,className:"w-[230px] h-[40px] border-1 border-white backdrop-filter backdrop-blur-lg bg-white bg-opacity-30 dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60"})}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(x.Ay,{className:"border-none text-white bg-button-gradient",icon:(0,t.jsx)(c.A,{}),onClick:()=>{A(!0)},children:Y("create_knowledge")})})]}),(0,t.jsx)("div",{className:" mt-4 mx-[-8px] overflow-y-auto h-full pb-12",children:(0,t.jsx)("div",{className:"flex flex-wrap ",children:null==s?void 0:s.map(e=>(0,t.jsx)(b.Ay,{onClick:()=>{I(e),k(!0),localStorage.setItem("cur_space_id",JSON.stringify(e.id))},description:e.desc,name:e.name,logo:"FinancialReport"===e.domain_type?"/models/fin_report.jpg":"KnowledgeGraph"===e.vector_type?"/models/knowledge-graph.png":"FullText"===e.vector_type?"/models/knowledge-full-text.jpg":"/models/knowledge-default.jpg",RightTop:(0,t.jsx)(b._f,{menu:{items:[{key:"del",label:(0,t.jsx)("span",{className:"text-red-400",onClick:()=>{m.A.confirm({title:Y("Tips"),icon:(0,t.jsx)(i.A,{}),content:"".concat(Y("Del_Knowledge_Tips"),"?"),okText:"Yes",okType:"danger",cancelText:"No",async onOk(){await (0,f.Vb)((0,f.O_)({name:null==e?void 0:e.name})),X()}})},children:Y("Delete")})}]}}),rightTopHover:!1,Tags:(0,t.jsxs)("div",{className:"flex item-center",children:[(0,t.jsx)(p.A,{children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(o.A,{className:"mt-[1px]"}),e.docs]})}),(0,t.jsx)(p.A,{children:(0,t.jsx)("span",{className:"flex items-center gap-1",children:e.domain_type||"Normal"})}),e.vector_type?(0,t.jsx)(p.A,{children:(0,t.jsx)("span",{className:"flex items-center gap-1",children:e.vector_type})}):null]}),LeftBottom:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{children:e.owner}),(0,t.jsx)("span",{children:"•"}),(null==e?void 0:e.gmt_modified)&&(0,t.jsx)("span",{children:N()(null==e?void 0:e.gmt_modified).fromNow()+" "+Y("update")})]}),RightBottom:(0,t.jsx)(b.VV,{text:Y("start_chat"),onClick:()=>{J(e)}})},e.id))})})]}),(0,t.jsx)(m.A,{className:"h-5/6 overflow-hidden",open:y,width:"70%",onCancel:()=>k(!1),footer:null,destroyOnHidden:!0,children:(0,t.jsx)(eS,{space:w,onAddDoc:function(e){F(e),T(1),A(!0),L("start")},onDeleteDoc:X,addStatus:O})}),(0,t.jsxs)(m.A,{title:Y("New_knowledge_base"),centered:!0,open:a,destroyOnHidden:!0,onCancel:()=>{A(!1)},width:1e3,afterClose:()=>{T(0),X()},footer:null,children:[(0,t.jsx)(j.A,{current:S,items:K}),0===S&&(0,t.jsx)(C,{handleStepChange:Z,spaceConfig:G}),1===S&&(0,t.jsx)(B,{handleStepChange:Z}),(0,t.jsx)(P,{className:q()({hidden:2!==S}),spaceName:E,docType:V,handleStepChange:Z}),3===S&&(0,t.jsx)($,{spaceName:E,docType:V,uploadFiles:U,handleStepChange:Z})]})]})}},63771:(e,s,l)=>{Promise.resolve().then(l.bind(l,43539))},84182:(e,s,l)=>{"use strict";l.d(s,{Ay:()=>p,VV:()=>h,_f:()=>x});var a=l(95155),t=l(81106),n=l(97540),i=l(94600),r=l(90797),c=l(82343),o=l(29300),d=l.n(o),m=l(17985),u=l(66766);l(12115),l(2785);let h=e=>{let{onClick:s,Icon:l="/pictures/card_chat.png",text:t=(0,m.t)("start_chat")}=e;return"string"==typeof l&&(l=(0,a.jsx)(u.default,{src:l,alt:l,width:17,height:15})),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-default",onClick:e=>{e.stopPropagation(),s&&s()},children:[l,(0,a.jsx)("span",{children:t})]})},x=e=>{let{menu:s}=e;return(0,a.jsx)(c.A,{menu:s,getPopupContainer:e=>e.parentNode,placement:"bottomRight",autoAdjustOverflow:!1,children:(0,a.jsx)(t.A,{className:"p-2 hover:bg-white hover:dark:bg-black rounded-md"})})},p=e=>{let{RightTop:s,Tags:l,LeftBottom:t,RightBottom:c,onClick:o,rightTopHover:m=!0,logo:u,name:h,description:x,className:p,scene:j,code:_}=e;return"string"==typeof x&&(x=(0,a.jsx)("p",{className:"line-clamp-2 relative bottom-4 text-ellipsis min-h-[42px] text-sm text-[#525964] dark:text-[rgba(255,255,255,0.65)]",children:x})),(0,a.jsx)("div",{className:d()("hover-underline-gradient flex justify-center mt-6 relative group w-1/3 px-2 mb-6",p),children:(0,a.jsxs)("div",{onClick:o,className:"backdrop-filter backdrop-blur-lg cursor-pointer  bg-white/70  border-2 border-white rounded-lg shadow p-4 relative w-full h-full dark:border-[#6f7f95] dark:bg-[#6f7f95]/60",children:[(0,a.jsxs)("div",{className:"flex items-end relative bottom-8 justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-end gap-4 w-11/12  flex-1",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm w-14 h-14 flex items-center p-2",children:(0,a.jsx)("img",{src:u,alt:h,className:"w-9 min-w-9 rounded-full max-w-none"})}),(0,a.jsx)("div",{className:"flex-1",children:h.length>6?(0,a.jsx)(n.A,{title:h,placement:"topLeft",children:(0,a.jsx)("span",{className:"line-clamp-1 text-ellipsis font-semibold text-base",style:{maxWidth:"60%"},children:h})}):(0,a.jsx)("span",{className:"line-clamp-1 text-ellipsis font-semibold text-base",style:{maxWidth:"60%"},children:h})})]}),(0,a.jsx)("span",{className:d()("shrink-0",{hidden:m,"group-hover:block":m}),onClick:e=>{e.stopPropagation()},children:s})]}),x,(0,a.jsx)("div",{className:"relative bottom-2",children:l}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{children:t}),(0,a.jsx)("div",{children:c})]}),_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{className:"my-3"}),(0,a.jsx)(r.A.Text,{copyable:!0,className:"absolute bottom-1 right-4 text-xs text-gray-500",children:_})]})]})})}}},e=>{e.O(0,[1448,562,240,5600,2826,7330,4935,4316,8779,3930,3485,5033,586,8052,3769,5726,2013,7316,6939,1242,5566,6467,2570,964,7985,797,2343,7744,7514,3821,6174,2275,5719,8118,6124,373,7741,2466,1070,4496,8441,5964,7358],()=>e(e.s=63771)),_N_E=e.O()}]);