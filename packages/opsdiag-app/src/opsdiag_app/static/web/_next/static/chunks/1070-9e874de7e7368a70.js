"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1070],{7132:(e,t,a)=>{a.d(t,{ZI:()=>r,zq:()=>n});let l="/models/huggingface.svg",n=new Proxy({},{get:(e,t)=>({label:function(e){var t;if(!e)return"";if(null==(t=o[e])?void 0:t.label)return o[e].label;let a=e.toLowerCase();for(let t in o){let l=o[t];if(l.patterns&&l.patterns.some(e=>a.includes(e.toLowerCase()))){let t=e.match(/[-_](\d+b|\d+\.\d+b?|v\d+(\.\d+)?)/i),a=e.match(/[-_](\d+b)/i),n=l.label;return t&&!a&&(n+=" ".concat(t[1])),a&&(n+=" ".concat(a[1])),n}}return e}(t),icon:r(t)})}),o={deepseek:{label:"DeepSeek",icon:"/models/deepseek.png",patterns:["deepseek","r1"]},qwen:{label:"Qwen",icon:"/models/qwen2.png",patterns:["qwen","qwen2","qwen2.5","qwq","qvq"]},gemini:{label:"Gemini",icon:"/models/gemini.png",patterns:["gemini"]},moonshot:{label:"Moonshot",icon:"/models/moonshot.png",patterns:["moonshot","kimi"]},doubao:{label:"Doubao",icon:"/models/doubao.png",patterns:["doubao"]},ernie:{label:"ERNIE",icon:"/models/ernie.png",patterns:["ernie"]},proxyllm:{label:"Proxy LLM",icon:"/models/chatgpt.png",patterns:["proxy"]},chatgpt:{label:"ChatGPT",icon:"/models/chatgpt.png",patterns:["chatgpt","gpt","o1","o3"]},vicuna:{label:"Vicuna",icon:"/models/vicuna.jpeg",patterns:["vicuna"]},chatglm:{label:"ChatGLM",icon:"/models/chatglm.png",patterns:["chatglm","glm"]},llama:{label:"Llama",icon:"/models/llama.jpg",patterns:["llama","llama2","llama3"]},baichuan:{label:"Baichuan",icon:"/models/baichuan.png",patterns:["baichuan"]},claude:{label:"Claude",icon:"/models/claude.png",patterns:["claude"]},bard:{label:"Bard",icon:"/models/bard.gif",patterns:["bard"]},tongyi:{label:"Tongyi",icon:"/models/tongyi.apng",patterns:["tongyi"]},yi:{label:"Yi",icon:"/models/yi.svg",patterns:["yi"]},bailing:{label:"Bailing",icon:"/models/bailing.svg",patterns:["bailing"]},wizardlm:{label:"WizardLM",icon:"/models/wizardlm.png",patterns:["wizard"]},internlm:{label:"InternLM",icon:"/models/internlm.png",patterns:["internlm"]},solar:{label:"Solar",icon:"/models/solar_logo.png",patterns:["solar"]},gorilla:{label:"Gorilla",icon:"/models/gorilla.png",patterns:["gorilla"]},zhipu:{label:"Zhipu",icon:"/models/zhipu.png",patterns:["zhipu"]},falcon:{label:"Falcon",icon:"/models/falcon.jpeg",patterns:["falcon"]},huggingface:{label:"Hugging Face",icon:"/models/huggingface.svg",patterns:["huggingface","hf"]}};function r(e){var t;if(!e)return l;let a=e.toLowerCase();if(null==(t=o[e])?void 0:t.icon)return o[e].icon;for(let e in o){let t=o[e];if(t.patterns&&t.patterns.some(e=>a.includes(e.toLowerCase())))return t.icon}let n=a.split(/[-_]/);if(n.length>0){let e=n[0];for(let t in o)if(e===t.toLowerCase())return o[t].icon}return l}},28867:(e,t,a)=>{a.d(t,{fG:()=>ei,LO:()=>es,$q:()=>i.$q,tI:()=>N,A1:()=>Y,Wz:()=>_,CB:()=>V,Ty:()=>p,Vb:()=>el,CK:()=>C,cT:()=>X,kQ:()=>R,TT:()=>J,a8:()=>S,Tu:()=>T,O_:()=>U,Ir:()=>b,mr:()=>d,Eg:()=>i.Eg,Y6:()=>$,eH:()=>i.eH,rW:()=>i.rW,Db:()=>i.Db,su:()=>i.su,lw:()=>P,r:()=>A,d_:()=>i.d_,PS:()=>i.PS,PO:()=>i.PO,RI:()=>x,b7:()=>L,uh:()=>q,ME:()=>O,B1:()=>Z,O6:()=>B,RO:()=>y,BN:()=>i.BN,zx:()=>Q,Hy:()=>E,Mz:()=>W,Xr:()=>i.Xr,Tz:()=>I,f1:()=>w,j_:()=>k,C0:()=>et,b1:()=>v,C5:()=>f,LU:()=>i.LU,T1:()=>g,K8:()=>m,Cf:()=>u,GE:()=>z,V6:()=>c,Nq:()=>ee,Mn:()=>H,vc:()=>s,kE:()=>j,Z9:()=>G,Ps:()=>D,bQ:()=>F,bl:()=>K,fy:()=>i.fy,Nr:()=>i.Nr,qj:()=>h,XX:()=>M});var l,n=a(47937),o=a(81702),r=a(23464),i=a(92366);let s=e=>es("/api/v1/chat/stop?conv_session_id=".concat(e.conv_session_id),e);(0,n.F6)();let c=(e,t)=>es("/knowledge/".concat(e,"/document/list"),t),p=e=>es("/knowledge/".concat(e.space_name,"/document/yuque/add"),e),d=(e,t)=>es("/knowledge/".concat(e,"/document/edit"),t),u=e=>ei("/knowledge/".concat(e,"/recommend_questions")),g=e=>ei("/knowledge/".concat(e,"/recall_retrievers")),m=(e,t)=>es("/knowledge/".concat(t,"/recall_test"),e),f=e=>ei("/prompt/type/targets?prompt_type=".concat(e)),v=e=>es("/prompt/template/load?prompt_type=".concat(e.prompt_type,"&target=").concat(e.target,"&sub_target=").concat(e.sub_target),e),_=e=>es("/prompt/add",e),h=e=>es("/prompt/update",e),b=e=>es("/prompt/delete",e),y=e=>es("/prompt/query_page?page=".concat(e.page,"&page_size=").concat(e.page_size),e),w=e=>es("/prompt/response/verify",e),k=e=>es("/api/v1/chat/dialogue/new?app_code=".concat(e.app_code),e),L=()=>ei("/api/v1/chat/dialogue/list"),q=e=>ei("/api/v1/chat/dialogue/list?filter=".concat(e)),I=()=>ei("/api/v1/model/types"),A=e=>ei("/api/v1/chat/dialogue/messages/history?con_uid=".concat(e)),C=e=>es("/api/v1/chat/dialogue/clear?con_uid=".concat(e)),S=e=>es("/api/v1/chat/dialogue/delete?con_uid=".concat(e)),P=e=>es("/knowledge/".concat(e,"/arguments"),{}),z=(e,t)=>es("/knowledge/".concat(e,"/argument/save"),t),E=e=>es("/knowledge/space/list",e),O=(e,t)=>es("/knowledge/".concat(e,"/document/list"),t),N=(e,t)=>es("/knowledge/".concat(e,"/document/add"),t),V=e=>es("/knowledge/space/add",e),x=()=>ei("/knowledge/document/chunkstrategies"),D=(e,t)=>es("/knowledge/".concat(e,"/document/sync"),t),G=(e,t)=>es("/knowledge/".concat(e,"/document/sync_batch"),t),M=(e,t)=>es("/knowledge/".concat(e,"/document/upload"),t),T=(e,t)=>es("/knowledge/".concat(e,"/document/delete"),t),U=e=>es("/knowledge/space/delete",e),B=()=>ei("/api/v2/serve/model/models"),R=e=>es("/api/v2/serve/model/models",e),j=e=>es("/api/v2/serve/model/models/stop",e),H=e=>es("/api/v2/serve/model/models/start",e),W=()=>ei("/api/v2/serve/model/model-types"),X=e=>es("/api/v1/app/collect",e),F=e=>es("/api/v1/app/uncollect",e),K=e=>es("/api/v1/app/unpublish",{app_code:e}),$=e=>ei("/api/v1/app/info",e),J=e=>es("/api/v1/app/remove",e),Q=()=>ei("/knowledge/space/config"),Z=(e,t)=>es("/api/v1/serve/mcp/query_fuzzy?page=".concat(null==t?void 0:t.page,"&page_size=").concat(null==t?void 0:t.page_size),e),Y=e=>es("/api/v1/serve/mcp/",e),ee=e=>es("/api/v1/serve/mcp/start",e),et=e=>es("/api/v1/serve/mcp/offline",e);var ea=a(59362);let el=(e,t,a)=>e.then(e=>{let{data:l}=e;if(!l)throw Error("Network Error!");if(!l.success)if("*"===a||l.err_code&&a&&a.includes(l.err_code));else{var n;t&&t.error({message:"Request error",description:null!=(n=null==l?void 0:l.err_msg)?n:"The interface is abnormal. Please try again later"})}return[null,l.data,l,e]}).catch(e=>{let a=e.message;if(e instanceof ea.pe)try{let{err_msg:t}=JSON.parse(e.request.response);t&&(a=t)}catch(e){}return t&&t.error({message:"Request error",description:a}),[e,null,null,null]});var en=a(49509);let eo=r.A.create({baseURL:null!=(l=en.env.NEXT_PUBLIC_API_BASE_URL)?l:"/"}),er=["/db/add","/db/test/connect","/db/summary","/params/file/load","/chat/prepare","/model/start","/model/stop","/editor/sql/run","/sql/editor/submit","/editor/chart/run","/chart/editor/submit","/document/upload","/document/sync","/agent/install","/agent/uninstall","/personal/agent/upload"];eo.interceptors.request.use(e=>{let t=er.some(t=>e.url&&e.url.indexOf(t)>=0);return e.timeout||(e.timeout=t?6e4:1e5),e.headers.set(o.uz,(0,n.F6)()),e});let ei=(e,t,a)=>eo.get(e,{params:t,...a}),es=(e,t,a)=>eo.post(e,t,a)},39740:(e,t,a)=>{a.d(t,{UK:()=>s,V:()=>p,cE:()=>d,rA:()=>c});var l=a(95155),n=a(28867);a(81702);var o=a(54099),r=a(35695),i=a(12115);let s=(0,i.createContext)({mode:"light",scene:"",chatId:"",model:"",modelList:[],dbParam:void 0,dialogueList:[],agent:"",setAgent:()=>{},setModel:()=>{},setIsContract:()=>{},setIsMenuExpand:()=>{},setDbParam:()=>void 0,setMode:()=>void 0,history:[],setHistory:()=>{},docId:void 0,setDocId:()=>{},currentDialogInfo:{chat_scene:"",app_code:""},setCurrentDialogInfo:()=>{},adminList:[],refreshDialogList:()=>{}}),c=e=>{var t,a,c;let{children:p}=e,d=(0,r.useSearchParams)(),u=null!=(t=null==d?void 0:d.get("conv_uid"))?t:"",g=null!=(a=null==d?void 0:d.get("scene"))?a:"",m=null!=(c=null==d?void 0:d.get("db_param"))?c:"",[f,v]=(0,i.useState)(!1),[_,h]=(0,i.useState)("light"),[b,y]=(0,i.useState)("chat_dashboard"!==g),[w,k]=(0,i.useState)(m),[L,q]=(0,i.useState)(""),[I,A]=(0,i.useState)([]),[C,S]=(0,i.useState)(),[P,z]=(0,i.useState)("light"),[E,O]=(0,i.useState)(u),[N,V]=(0,i.useState)([]),[x,D]=(0,i.useState)({chat_scene:"",app_code:""}),{data:G=[]}=(0,o.A)(async()=>{let[,e]=await (0,n.Vb)((0,n.Tz)());return null!=e?e:[]}),{data:M=[],refresh:T,loading:U}=(0,o.A)(async()=>await (0,n.Vb)((0,n.b7)()));return(0,i.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("cur_dialog_info")||"");D(e)}catch(e){D({chat_scene:"",app_code:""})}},[]),(0,i.useEffect)(()=>{h(G[0])},[G,null==G?void 0:G.length]),(0,i.useEffect)(()=>{u&&O(u)},[u]),(0,l.jsx)(s.Provider,{value:{isContract:f,isMenuExpand:b,scene:g,chatId:E,model:_,modelList:G,dbParam:w||m,agent:L,setAgent:q,mode:P,setMode:z,setModel:h,setIsContract:v,setIsMenuExpand:y,setDbParam:k,history:I,setHistory:A,docId:C,setDocId:S,currentDialogInfo:x,setCurrentDialogInfo:D,adminList:N,refreshDialogList:T,dialogueList:M},children:p})},p=(0,i.createContext)(null),d=(0,i.createContext)(null)},47937:(e,t,a)=>{a.d(t,{yx:()=>s,A4:()=>p,oF:()=>o,F6:()=>r,nr:()=>g,UX:()=>u,sC:()=>d});var l=a(94936);a(7132);var n=a(81702);function o(){var e;let t=null!=(e=localStorage.getItem(n.yx))?e:"";try{return JSON.parse(t)}catch(e){return null}}function r(){try{var e;return JSON.parse(null!=(e=localStorage.getItem(n.Gm))?e:"").user_id}catch(e){return}}var i=a(49509);let s="__db_gpt_im_key",c=["mysql","duckdb","sqlite","postgresql","db2","spark","hive","bigquery","db2i","mariadb","tidb","n1ql","plsql","redshift","sql","trino","transactsql","singlestoredb","snowflake","tsql"];function p(e,t){if(!e)return"";try{let a=c.includes(t)?t:void 0;return(0,l.GP)(e,{language:a})}catch(t){return e}}let d=e=>{try{if(!e.startsWith("derisk-fs://"))return e;let t=new URL(e);if("derisk-fs:"!==t.protocol)return e;let a=t.pathname.split("/").filter(Boolean);if(a.length<2)return e;let l=a[0],n=a[1];return"".concat(i.env.NEXT_PUBLIC_API_BASE_URL||"","/api/v2/serve/file/files/").concat(l,"/").concat(n).concat(t.search)}catch(t){return console.error("Error transforming file URL:",t),e}},u=e=>e&&e.file_name?'\n```vis-attatch\n{"name": "'.concat(e.file_name,'", "type": "text_file", "url": "').concat(e.file_url,'" }\n```'):"",g=e=>{if(!e||null==e)return[];try{let t=e;if("string"==typeof e){let a=e.trim();t=a.startsWith("{")||a.startsWith("[")?JSON.parse(e):e}if(t&&!Array.isArray(t)&&"object"==typeof t)if(t.file_name||t.file_path){let e=t.file_name||"",a=t.file_path||t.url||"",l=/\.(jpg|jpeg|png|gif|bmp|webp|svg)$/i.test(e),n=/\.(mp3|wav|ogg|aac|flac|m4a)$/i.test(e),o=/\.(mp4|webm|mov|avi|wmv|flv|mkv)$/i.test(e);t=l?[{type:"image_url",image_url:{url:a,file_name:e}}]:n?[{type:"audio_url",audio_url:{url:a,file_name:e}}]:o?[{type:"video_url",video_url:{url:a,file_name:e}}]:[{type:"file_url",file_url:{url:a,file_name:e}}]}else t=[t];else if(!Array.isArray(t))return[];return t}catch(e){return console.error("Parse resourceValue error:",e),[]}}},81702:(e,t,a)=>{a.d(t,{uz:()=>l,yx:()=>r,Vp:()=>o,Mt:()=>n,Gm:()=>i,DO:()=>s});let l="user-id",n="__db_gpt_theme_key",o="__db_gpt_lng_key",r="__db_gpt_im_key",i="__db_gpt_uinfo_key",s="__db_gpt_uinfo_vt_key"},91070:(e,t,a)=>{a.d(t,{BR:()=>r,zo:()=>o,UK:()=>l.UK,rA:()=>l.rA,cE:()=>l.cE,V:()=>l.V});var l=a(39740),n=a(12115);let o=(0,n.createContext)({history:[],replyLoading:!1,scrollRef:{current:null},canAbort:!1,chartsData:[],agent:"",currentDialogue:{},appInfo:{},maxNewTokensValue:1024,resourceValue:{},faultTypeValue:"",projectNameValue:"",chatInParams:[],setChatInParams:()=>{},modelValue:"",setModelValue:()=>{},setFaultTypeValue:()=>{},setProjectNameValue:()=>{},setResourceValue:()=>{},setMaxNewTokensValue:()=>{},setAppInfo:()=>{},setAgent:()=>{},setCanAbort:()=>{},setReplyLoading:()=>{},refreshDialogList:()=>{},refreshHistory:()=>{},refreshAppInfo:()=>{},setHistory:()=>{},handleChat:()=>Promise.resolve(),isShowDetail:!0,setIsShowDetail:()=>{},isDebug:!1}),r=(0,n.createContext)({collapsed:!1,setCollapsed:()=>{},appInfo:{},setAppInfo:()=>{},refreshAppInfo:()=>{},refreshAppInfoLoading:!1,fetchUpdateApp:()=>{},fetchUpdateAppLoading:!1,setAssociationAgentModalOpen:()=>{},setAssociationKnowledgeModalOpen:()=>{},setAssociationSkillModalOpen:()=>{},chatId:"",setChatId:()=>{},refetchVersionData:()=>{},versionData:{},queryAppInfo:()=>{}})},92366:(e,t,a)=>{a.d(t,{$q:()=>o,BN:()=>c,Db:()=>p,Eg:()=>d,LU:()=>_,Nr:()=>u,PO:()=>g,PS:()=>f,Xr:()=>n,d_:()=>m,eH:()=>i,fy:()=>r,rW:()=>s,su:()=>v});var l=a(28867);let n=()=>(0,l.fG)("/api/v1/team-mode/list"),o=e=>(0,l.LO)("/api/v1/app/building/create",e),r=e=>(0,l.LO)("/api/v1/app/building/edit",e,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),i=e=>(0,l.LO)("/api/v1/app/list?page=".concat(e.page||1,"&page_size=").concat(e.page_size||12),e),s=()=>(0,l.fG)("/api/v1/llm-strategy/list"),c=e=>(0,l.fG)("/api/v1/app/resources/list?type=".concat(e.type,"&version=v2")),p=e=>(0,l.fG)("/api/v1/llm-strategy/value/list?type=".concat(e)),d=e=>(0,l.fG)("/api/v1/app/".concat(e,"/admins")),u=e=>(0,l.LO)("/api/v1/app/admins/update",e),g=()=>(0,l.fG)("/api/v1/serve/building/config/chat/out/modes"),m=()=>(0,l.fG)("/api/v1/serve/building/config/chat/in/params/all"),f=e=>(0,l.LO)("/api/v1/serve/building/config/chat/in/params/render",e),v=e=>(0,l.fG)("/api/v1/serve/building/config/list?app_code=".concat(e.app_code,"&page=",1,"&page_size=",100)),_=e=>(0,l.LO)("/api/v1/serve/app/publish",e)}}]);