"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9622],{59622:(e,l,a)=>{a.d(l,{A:()=>H});var t=a(95155),n=a(91070),r=a(53867),s=a(56939),o=a(98696),i=a(16467),u=a(29300),c=a.n(u),p=a(12115),d=a(91218),m=a(28867),_=a(14808),x=a(75839),y=a(44421),h=a(31511),v=a(97540),f=a(68250),j=a(56200),b=a(1828),g=a(76174);let A=(0,p.memo)(e=>{var l,a;let{maxNewTokensValue:r,setMaxNewTokensValue:o}=e,{appInfo:i,chatInParams:u,setChatInParams:c}=(0,p.useContext)(n.zo),{t:m}=(0,d.Bd)(),_=(0,p.useMemo)(()=>(null==u?void 0:u.filter(e=>"max_new_tokens"!==e.param_type))||[],[u]),x=(0,p.useMemo)(()=>{var e,l;return null==i||null==(l=i.layout)||null==(e=l.chat_in_layout)?void 0:e.find(e=>"max_new_tokens"===e.param_type)},[null==i||null==(l=i.layout)?void 0:l.chat_in_layout]),y=(0,p.useMemo)(()=>{var e,l;return(null==i||null==(l=i.layout)||null==(e=l.chat_in_layout)?void 0:e.map(e=>e.param_type))||[]},[null==i||null==(a=i.layout)?void 0:a.chat_in_layout]),h=(0,p.useMemo)(()=>(null==x?void 0:x.param_render_type)==="string",[null==x?void 0:x.param_render_type]);if(!y.includes("max_new_tokens"))return(0,t.jsx)(v.A,{title:m("max_new_tokens_tip"),children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)] cursor-pointer",children:(0,t.jsx)(f.A,{className:"text-xl cursor-not-allowed opacity-30"})})});let A=e=>{let l=e.target.value;c([..._,{param_type:"max_new_tokens",param_value:l,sub_type:null==x?void 0:x.sub_type}]),o(l)},w=e=>{null===e||isNaN(e)||(c([..._,{param_type:"max_new_tokens",param_value:JSON.stringify(e),sub_type:null==x?void 0:x.sub_type}]),o(e))},N=e=>{isNaN(e)||(c([..._,{param_type:"max_new_tokens",param_value:JSON.stringify(e),sub_type:null==x?void 0:x.sub_type}]),o(e))};return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(j.A,{arrow:!1,trigger:["click"],placement:"topLeft",content:()=>(0,t.jsx)("div",{className:"flex items-center gap-2",children:h?(0,t.jsx)(s.A,{size:"small",className:"w-40",placeholder:"请输入内容",onChange:A,value:"string"==typeof r?r:""}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.A,{className:"w-32",min:1,max:20480,step:1,onChange:N,value:"number"==typeof r?r:4e3}),(0,t.jsx)(g.A,{size:"small",className:"w-20",min:1,max:20480,step:1,onChange:w,value:"number"==typeof r?r:4e3})]})}),children:(0,t.jsx)(v.A,{title:h?"IP设置":m("max_new_tokens"),placement:"bottom",arrow:!1,children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)] cursor-pointer",children:(0,t.jsx)(f.A,{})})})}),(0,t.jsx)("span",{className:"text-sm ml-2",children:r})]})});var w=a(92611),N=a(32013),C=a(39508);let S=(0,p.memo)(()=>{var e,l;let{modelList:a}=(0,p.useContext)(n.UK),{appInfo:r,modelValue:s,setModelValue:o,chatInParams:i,setChatInParams:u}=(0,p.useContext)(n.zo),{t:c}=(0,d.Bd)(),m=(0,p.useMemo)(()=>(null==i?void 0:i.filter(e=>"model"!==e.param_type))||[],[i]),_=(0,p.useMemo)(()=>{var e,l;return null==r||null==(l=r.layout)||null==(e=l.chat_in_layout)?void 0:e.find(e=>"model"===e.param_type)},[null==r||null==(e=r.layout)?void 0:e.chat_in_layout]);return(0,p.useMemo)(()=>{var e,l;return(null==r||null==(l=r.layout)||null==(e=l.chat_in_layout)?void 0:e.map(e=>e.param_type))||[]},[null==r||null==(l=r.layout)?void 0:l.chat_in_layout]).includes("model")?(0,t.jsx)(N.A,{value:s,placeholder:c("choose_model"),className:"h-8 w-42 rounded-1xl",onChange:e=>{(e=>{e&&(o(e),u([...m,{param_type:"model",param_value:e,sub_type:null==_?void 0:_.sub_type}]))})(e)},popupMatchSelectWidth:300,children:a.map(e=>(0,t.jsx)(N.A.Option,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(C.A,{model:e}),(0,t.jsx)("span",{className:"ml-2 overflow-hidden text-ellipsis whitespace-nowrap",children:e})]})},e))}):(0,t.jsx)(v.A,{title:c("model_tip"),children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)]",children:(0,t.jsx)(w.A,{className:"text-xl cursor-not-allowed opacity-30"})})})});var k=a(92366),M=a(3475),z=a(92197),E=a(54099),I=a(62471),V=a(5662),B=a(27514),O=a(35695);let T=["text_file","image_file"],D=(0,p.memo)(e=>{var l,a,r,s,o,i;let{fileList:u,setFileList:_,setLoading:x,fileName:y}=e,{setResourceValue:h,appInfo:f,chatInParams:j,setChatInParams:b,refreshHistory:g,refreshDialogList:A,modelValue:w,resourceValue:C}=(0,p.useContext)(n.zo),{maxNewTokensValue:S}=(0,p.useContext)(n.zo),D=(0,O.useSearchParams)(),F=null!=(s=null==D?void 0:D.get("scene"))?s:"",L=null!=(o=(null==D?void 0:D.get("conv_uid"))||(null==D?void 0:D.get("chatId")))?o:"",{t:J}=(0,d.Bd)(),[R,P]=(0,p.useState)([]),K=(0,p.useMemo)(()=>{var e,l;return(null==f||null==(l=f.layout)||null==(e=l.chat_in_layout)?void 0:e.map(e=>e.param_type))||[]},[null==f||null==(l=f.layout)?void 0:l.chat_in_layout]),U=(0,p.useMemo)(()=>{var e,l,a;return K.includes("resource")&&!T.includes(null==f||null==(a=f.layout)||null==(l=a.chat_in_layout)||null==(e=l.filter(e=>"resource"===e.param_type)[0])?void 0:e.sub_type)},[null==f||null==(a=f.layout)?void 0:a.chat_in_layout,K]),H=(0,p.useMemo)(()=>(null==j?void 0:j.filter(e=>"resource"!==e.param_type))||[],[j]),W=(0,p.useMemo)(()=>{var e,l;return null==f||null==(l=f.layout)||null==(e=l.chat_in_layout)?void 0:e.find(e=>"resource"===e.param_type)},[null==f||null==(r=f.layout)?void 0:r.chat_in_layout]),{run:q,loading:G}=(0,E.A)(async e=>await (0,m.Vb)((0,k.PS)([e])),{manual:!0,onSuccess:e=>{var l;let[,a]=e,t=null==a?void 0:a.find(e=>"resource"===e.param_type&&e.sub_type===(null==W?void 0:W.sub_type));t&&P(null!=(l=null==t?void 0:t.param_type_options)?l:[])}});(0,I.A)(async()=>{U&&W&&await q(W)},[U,W]);let Q=(0,p.useMemo)(()=>{var e;return null==(e=R.map)?void 0:e.call(R,e=>({label:e.label,value:e.key}))},[R]);(0,p.useEffect)(()=>{if((null==j?void 0:j.length)>0&&W&&R.length>0){let e=j.find(e=>"resource"===e.param_type);e&&(null==e?void 0:e.param_value)&&((null==e?void 0:e.param_value.trim().startsWith("{"))||b([...H,{param_type:"resource",param_value:JSON.stringify(R.find(e=>e.key===C)),sub_type:null==W?void 0:W.sub_type}]))}},[j,W,R,b,C]);let X=(0,p.useCallback)(async()=>{let e=null==u?void 0:u[0];if(e){x(!0);try{let l={file_name:e.name,file_size:e.size,upload_time:new Date().toISOString()},a=[...H,{param_type:"resource",param_value:JSON.stringify(l),sub_type:null==W?void 0:W.sub_type}];b(a),h(l),V.Ay.success({message:"✅ 文件上传成功",description:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("span",{style:{color:"#52c41a",fontSize:"16px"},children:"\uD83D\uDCC4"}),(0,t.jsx)("span",{children:'"'.concat(e.name,'" 已成功上传并可以使用')})]}),placement:"topRight",duration:4,style:{borderRadius:"12px",boxShadow:"0 6px 16px rgba(0, 0, 0, 0.12)",border:"1px solid #b7eb8f",backgroundColor:"#f6ffed"}}),await g(),A&&await A()}catch(e){console.error("Upload failed:",e),V.Ay.error({message:"❌ 文件上传失败",description:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("span",{style:{color:"#ff4d4f",fontSize:"16px"},children:"⚠️"}),(0,t.jsx)("span",{children:"上传过程中出现错误，请检查文件格式后重试"})]}),placement:"topRight",duration:5,style:{borderRadius:"12px",boxShadow:"0 6px 16px rgba(0, 0, 0, 0.12)",border:"1px solid #ffccc7",backgroundColor:"#fff2f0"}})}finally{x(!1)}}},[L,u,w,A,g,F,x,h,H,b,null==W?void 0:W.sub_type]);if(!K.includes("resource"))return(0,t.jsx)(v.A,{title:J("extend_tip"),children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)]",children:(0,t.jsx)(M.A,{className:"text-lg cursor-not-allowed opacity-30"})})});switch(null==W?void 0:W.sub_type){case"text_file":case"image_file":case"common_file":return(0,t.jsx)(B.A,{name:"file",accept:(e=>{switch(e){case"text_file":return".txt,.doc,.docx,.pdf,.md";case"image_file":return".jpg,.jpeg,.png,.gif,.bmp,.webp";case"audio_file":return".mp3,.wav,.ogg,.aac";case"video_file":return".mp4,.wav,.wav";default:return""}})(null==W?void 0:W.sub_type),fileList:u,showUploadList:!1,beforeUpload:(e,l)=>{null==_||_(l)},customRequest:X,disabled:!!y,children:(0,t.jsx)(v.A,{title:J("file_tip"),arrow:!1,placement:"bottom",children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)]",children:(0,t.jsx)(z.A,{className:c()("text-xl",{"cursor-pointer":!(y||(null==(i=u[0])?void 0:i.name))})})})})});default:return(0,t.jsx)(N.A,{value:C,className:"w-30 h-8 rounded-3xl",onChange:e=>{(e=>{e&&(h(e),b([...H,{param_type:"resource",param_value:JSON.stringify(R.find(l=>l.key===e)),sub_type:null==W?void 0:W.sub_type}]))})(e)},disabled:!!(null==W?void 0:W.bind_value),loading:G,options:Q})}});var F=a(40010);let L=(0,p.memo)(e=>{var l,a;let{faultTypeValue:r,setFaultTypeValue:s}=e,{appInfo:o,chatInParams:i,setChatInParams:u}=(0,p.useContext)(n.zo),{t:c}=(0,d.Bd)(),[m,_]=(0,p.useState)(!1),x=(0,p.useMemo)(()=>(null==i?void 0:i.filter(e=>"fault_type"!==e.param_type))||[],[i]),y=(0,p.useMemo)(()=>{var e,l;return null==o||null==(l=o.layout)||null==(e=l.chat_in_layout)?void 0:e.find(e=>"fault_type"===e.param_type)},[null==o||null==(l=o.layout)?void 0:l.chat_in_layout]),h=(0,p.useMemo)(()=>{var e,l;return(null==o||null==(l=o.layout)||null==(e=l.chat_in_layout)?void 0:e.map(e=>e.param_type))||[]},[null==o||null==(a=o.layout)?void 0:a.chat_in_layout]),f=(0,p.useMemo)(()=>{var e;console.log("故障类型调试信息:",{appInfo:o,chat_in_layout:null==o||null==(e=o.layout)?void 0:e.chat_in_layout,fault_type:y,param_type_options:null==y?void 0:y.param_type_options});let l=(null==y?void 0:y.param_type_options)||[];return l.length>0&&"string"==typeof l[0]?l.map(e=>({label:e,value:e})):l.length>0&&l[0].label&&l[0].value?l:0===l.length?[{label:"网络故障",value:"网络故障"},{label:"存储故障",value:"存储故障"},{label:"计算故障",value:"计算故障"}]:l},[null==y?void 0:y.param_type_options,o]);if(!h.includes("fault_type"))return(0,t.jsx)(v.A,{title:"故障类型",children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)] cursor-pointer",children:(0,t.jsx)(F.A,{className:"text-xl cursor-not-allowed opacity-30"})})});let b=(0,t.jsxs)("div",{className:"w-64 p-2",children:[(0,t.jsx)("div",{className:"mb-2 text-sm font-medium",children:"选择故障类型"}),(0,t.jsx)(N.A,{value:r,onChange:e=>{s(e),u([...x,{param_type:"fault_type",param_value:e,sub_type:""}]),_(!1)},options:f,placeholder:"请选择故障类型",className:"w-full",size:"middle"})]});return(0,t.jsx)(j.A,{content:b,title:null,trigger:"click",open:m,onOpenChange:_,placement:"topLeft",arrow:!1,children:(0,t.jsx)(v.A,{title:"故障类型",placement:"bottom",children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)] cursor-pointer",children:(0,t.jsx)(F.A,{className:"text-xl ".concat(r?"text-[#0c75fc]":"")})})})})});var J=a(99257);let R=(0,p.memo)(e=>{var l,a;let{projectNameValue:r,setProjectNameValue:s}=e,{appInfo:o,chatInParams:i,setChatInParams:u}=(0,p.useContext)(n.zo),{t:c}=(0,d.Bd)(),[m,_]=(0,p.useState)(!1),x=(0,p.useMemo)(()=>(null==i?void 0:i.filter(e=>"project_name"!==e.param_type))||[],[i]),y=(0,p.useMemo)(()=>{var e,l;return null==o||null==(l=o.layout)||null==(e=l.chat_in_layout)?void 0:e.find(e=>"project_name"===e.param_type)},[null==o||null==(l=o.layout)?void 0:l.chat_in_layout]),h=(0,p.useMemo)(()=>{var e,l;return(null==o||null==(l=o.layout)||null==(e=l.chat_in_layout)?void 0:e.map(e=>e.param_type))||[]},[null==o||null==(a=o.layout)?void 0:a.chat_in_layout]),f=(0,p.useMemo)(()=>{let e=(null==y?void 0:y.param_type_options)||[];return e.length>0&&"string"==typeof e[0]?e.map(e=>({label:e,value:e})):e.length>0&&e[0].label&&e[0].value?e:0===e.length?[{label:"重庆健康云ECS",value:"重庆健康云ECS"},{label:"长春政务云ECS",value:"长春政务云ECS"},{label:"新疆石河子ECS",value:"新疆石河子ECS"}]:e},[null==y?void 0:y.param_type_options,o]);if(!h.includes("project_name"))return(0,t.jsx)(v.A,{title:"项目名称",children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)] cursor-pointer",children:(0,t.jsx)(J.A,{className:"text-xl cursor-not-allowed opacity-30"})})});let b=(0,t.jsxs)("div",{className:"w-64 p-2",children:[(0,t.jsx)("div",{className:"mb-2 text-sm font-medium",children:"选择项目名称"}),(0,t.jsx)(N.A,{value:r,onChange:e=>{s(e),u([...x,{param_type:"project_name",param_value:e,sub_type:""}]),_(!1)},options:f,placeholder:"请选择项目名称",className:"w-full",size:"middle"})]});return(0,t.jsx)(j.A,{content:b,title:null,trigger:"click",open:m,onOpenChange:_,placement:"topLeft",arrow:!1,children:(0,t.jsx)(v.A,{title:"项目名称",placement:"bottom",children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)] cursor-pointer",children:(0,t.jsx)(J.A,{className:"text-xl ".concat(r?"text-[#0c75fc]":"")})})})})}),P=(0,p.memo)(e=>{var l,a;let{ctrl:s}=e,{t:o}=(0,d.Bd)(),{history:u,scrollRef:f,canAbort:j,replyLoading:b,currentDialogue:g,appInfo:w,maxNewTokensValue:N,resourceValue:C,faultTypeValue:k,projectNameValue:M,setMaxNewTokensValue:z,setFaultTypeValue:E,setProjectNameValue:I,refreshHistory:V,setCanAbort:B,setReplyLoading:T,handleChat:F,chatInParams:J,setChatInParams:P,setResourceValue:K}=(0,p.useContext)(n.zo),[U,H]=(0,p.useState)([]),[W,q]=(0,p.useState)(!1),[G,Q]=(0,p.useState)(!1),X=(0,O.useSearchParams)(),Y=null!=(a=null==X?void 0:X.get("conv_uid"))?a:"",Z=(0,p.useMemo)(()=>{var e,l;return(null==w||null==(l=w.layout)||null==(e=l.chat_in_layout)?void 0:e.map(e=>e.param_type))||[]},[null==w||null==(l=w.layout)?void 0:l.chat_in_layout]),$=(0,p.useMemo)(()=>[{tip:o("stop_replying"),icon:(0,t.jsx)(_.A,{className:c()({"text-[#0c75fc]":j})}),can_use:j,key:"abort",onClick:()=>{j&&((0,m.vc)({conv_session_id:Y}),s&&s.abort(),setTimeout(()=>{B(!1),T(!1)},100))}},{tip:o("answer_again"),icon:(0,t.jsx)(x.A,{}),can_use:!b&&u.length>0,key:"redo",onClick:async()=>{var e,l;let a=null==(l=u.filter(e=>"human"===e.role))||null==(e=l.slice(-1))?void 0:e[0];F((null==a?void 0:a.context)||"",{app_code:w.app_code,...Z.length&&{chat_in_params:J}}),setTimeout(()=>{var e,l;null==(l=f.current)||l.scrollTo({top:null==(e=f.current)?void 0:e.scrollHeight,behavior:"smooth"})},0)}},{tip:o("erase_memory"),icon:G?(0,t.jsx)(i.A,{spinning:G,indicator:(0,t.jsx)(r.A,{style:{fontSize:20}})}):(0,t.jsx)(y.A,{}),can_use:u.length>0,key:"clear",onClick:async()=>{G||(Q(!0),await (0,m.Vb)((0,m.CK)(Y)).finally(async()=>{await V(),Q(!1)}))}}],[o,j,b,u,G,s,B,T,F,w.app_code,Z,C,null==g?void 0:g.select_param,null==g?void 0:g.conv_uid,f,V]),ee=(0,p.useMemo)(()=>{try{if(C)if("string"==typeof C)return JSON.parse(C).file_name||"";else return C.file_name||""}catch(e){return""}},[C]);return(0,t.jsxs)("div",{className:"flex flex-col  mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-full w-full",children:[(0,t.jsxs)("div",{className:"flex gap-3 text-lg",children:[(0,t.jsx)(S,{}),(0,t.jsx)(D,{fileList:U,setFileList:H,setLoading:q,fileName:ee}),(0,t.jsx)(A,{maxNewTokensValue:N,setMaxNewTokensValue:z}),(0,t.jsx)(L,{faultTypeValue:k,setFaultTypeValue:E}),(0,t.jsx)(R,{projectNameValue:M,setProjectNameValue:I})]}),(0,t.jsx)("div",{className:"flex gap-1",children:(0,t.jsx)(t.Fragment,{children:$.map(e=>(0,t.jsx)(v.A,{title:e.tip,arrow:!1,placement:"bottom",children:(0,t.jsx)("div",{className:"flex w-8 h-8 items-center justify-center rounded-md hover:bg-[rgb(221,221,221,0.6)] text-lg ".concat(e.can_use?"cursor-pointer":"opacity-30 cursor-not-allowed"),onClick:()=>{var l;null==(l=e.onClick)||l.call(e)},children:e.icon})},e.key))})})]}),(0,t.jsx)(()=>{if(!(C&&"object"==typeof C&&"file_name"in C))return null;let e=C.file_name;return(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:(0,t.jsxs)("div",{className:"relative flex items-center justify-between border border-[#e3e4e6] dark:border-[rgba(255,255,255,0.6)] rounded-md py-1 px-2 bg-[#f3f6ff] min-w-[120px] max-w-[180px]",children:[(0,t.jsx)("span",{className:"absolute top-[-2px] right-[1] cursor-pointer z-10 text-gray-500 hover:text-red-500",onClick:()=>{var e,l;K({});let a=(null==J?void 0:J.filter(e=>"resource"!==e.param_type))||[],t=null==w||null==(l=w.layout)||null==(e=l.chat_in_layout)?void 0:e.find(e=>"resource"===e.param_type);P([...a,{param_type:"resource",param_value:"",sub_type:null==t?void 0:t.sub_type}])},title:"删除文件",children:(0,t.jsx)(h.A,{})}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-1 text-sm",children:"\uD83D\uDCC4"}),(0,t.jsx)("span",{className:"text-xs text-[#2b6cff] line-clamp-1 truncate",children:e})]})]})})},{}),(0,t.jsx)(i.A,{spinning:W,indicator:(0,t.jsx)(r.A,{style:{fontSize:24},spin:!0})})]})});var K=a(47937),U=a(71740);let H=(0,p.memo)(e=>{var l;let{ctrl:a,onSend:u}=e,{t:m}=(0,d.Bd)(),{scrollRef:_=null,replyLoading:x=!1,handleChat:y=null,appInfo:h=null,resourceValue:v=null,refreshDialogList:f=null,chatInParams:j=[],setResourceValue:b=()=>{}}=(0,p.useContext)(n.zo)||{},[g,A]=(0,p.useState)(""),[w,N]=(0,p.useState)(!1),[C,S]=(0,p.useState)(!1),k=(0,p.useRef)(0),M=(0,p.useMemo)(()=>{var e,l;return(null==h||null==(l=h.layout)||null==(e=l.chat_in_layout)?void 0:e.map(e=>e.param_type))||[]},[null==h||null==(l=h.layout)?void 0:l.chat_in_layout]),z=async()=>{var e,l;let a;if(k.current++,u){u(g),A("");return}if(setTimeout(()=>{var e,l;null==_||null==(l=_.current)||l.scrollTo({top:null==(e=_.current)?void 0:e.scrollHeight,behavior:"smooth"}),A("")},0),U.O.includes(null!=(l=null==(e=j.find(e=>"resource"===e.param_type))?void 0:e.sub_type)?l:"")){b(v||{});let e=[...(0,K.nr)(v)];e.push({type:"text",text:g}),a={role:"user",content:e}}else a=g;y&&await y(a,{app_code:(null==h?void 0:h.app_code)||"",...M.length&&{chat_in_params:j}}),1===k.current&&f&&await f()};return(0,t.jsx)("div",{className:"flex flex-col w-full mx-auto pt-4 pb-0 bg-transparent",children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col bg-white dark:bg-[rgba(255,255,255,0.16)] px-5 py-4 pt-2 rounded-xl relative border border-[#E0E7F2] dark:border-[rgba(255,255,255,0.6)] ".concat(w?"border-[#0c75fc]":""),id:"input-panel",children:[(0,t.jsx)(P,{ctrl:a}),(0,t.jsx)(s.A.TextArea,{placeholder:m("input_tips"),className:"w-full h-10 resize-none border-0 p-0 focus:shadow-none dark:bg-transparent",value:g,onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey||C||(e.preventDefault(),g.trim()&&!x&&z()))},onChange:e=>{A(e.target.value)},onFocus:()=>{N(!0)},onBlur:()=>N(!1),onCompositionStart:()=>S(!0),onCompositionEnd:()=>S(!1)}),(0,t.jsx)(o.Ay,{type:"primary",className:c()("flex items-center justify-center w-14 h-8 rounded-lg text-sm absolute right-4 bottom-3 bg-button-gradient border-0",{"cursor-not-allowed":!g.trim()}),onClick:()=>{!x&&g.trim()&&z()},children:x?(0,t.jsx)(i.A,{spinning:x,indicator:(0,t.jsx)(r.A,{className:"text-white"})}):m("sent")})]})})})},71740:(e,l,a)=>{a.d(l,{A:()=>p,O:()=>c});var t=a(95155),n=a(19361),r=a(74947),s=a(32570),o=a(32013),i=a(56939),u=a(12115);let c=["image_file","video_file","text_file","common_file"],p=u.memo(function(e){let{form:l,selectedChatConfigs:a,chatConfigOptions:u,onInputBlur:p,resourceOptions:d,modelOptions:m}=e;if(!a||0===a.length)return null;let _={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"};return(0,t.jsx)(t.Fragment,{children:null==a?void 0:a.map(e=>{var a,x=null==u?void 0:u.find(l=>l.param_type===e);if(!x)return null;switch(x.param_type){case"model":return(0,t.jsxs)(n.A,{gutter:24,children:[(0,t.jsx)(r.A,{span:14,children:(0,t.jsx)(s.A.Item,{label:(0,t.jsx)("span",{style:_,title:x.param_description,children:x.param_description}),name:x.param_type,labelCol:{flex:"80px"},children:(0,t.jsx)(o.A,{className:"h-10",options:(null==(a=x.sub_types)?void 0:a.map(e=>({value:e,label:e})))||[],disabled:!x.sub_types,placeholder:"请选择".concat(x.param_description),onBlur:()=>p("".concat(x.param_type,"_value"))})})},"".concat(x.param_type,"-col1")),(0,t.jsx)(r.A,{span:10,children:(0,t.jsx)(s.A.Item,{name:"".concat(x.param_type,"_value"),initialValue:x.param_default_value,children:(0,t.jsx)(o.A,{options:m,placeholder:"请输入".concat(x.param_description),className:"h-10 flex-1"})})},"".concat(x.param_type,"-col2"))]},x.param_type);case"temperature":return(0,t.jsxs)(n.A,{gutter:24,children:[(0,t.jsx)(r.A,{span:14,children:(0,t.jsx)(s.A.Item,{label:(0,t.jsx)("span",{style:_,title:x.param_description,children:x.param_description}),name:x.param_type,labelCol:{flex:"80px"},children:(0,t.jsx)(i.A,{type:"number",step:"0.01",disabled:!x.sub_types,placeholder:"请输入".concat(x.param_description),className:"h-10"})})},"".concat(x.param_type,"-col1")),(0,t.jsx)(r.A,{span:10,children:(0,t.jsx)(s.A.Item,{name:"".concat(x.param_type,"_value"),initialValue:x.param_default_value,children:(0,t.jsx)(i.A,{type:"number",step:"0.01",placeholder:"请输入".concat(x.param_description),className:"h-10",onBlur:()=>p("".concat(x.param_type,"_value"))})})},"".concat(x.param_type,"-col2"))]},x.param_type);case"max_new_tokens":return(0,t.jsxs)(n.A,{gutter:24,children:[(0,t.jsx)(r.A,{span:14,children:(0,t.jsx)(s.A.Item,{label:(0,t.jsx)("span",{style:_,title:x.param_description,children:x.param_description}),name:x.param_type,labelCol:{flex:"80px"},children:(0,t.jsx)(i.A,{type:"text",disabled:!x.sub_types,placeholder:"请输入".concat(x.param_description),className:"h-10"})})},"".concat(x.param_type,"-col1")),(0,t.jsx)(r.A,{span:10,children:(0,t.jsx)(s.A.Item,{name:"".concat(x.param_type,"_value"),initialValue:x.param_default_value,children:(0,t.jsx)(i.A,{type:"text",placeholder:"请输入".concat(x.param_description),className:"h-10",onBlur:()=>p("".concat(x.param_type,"_value"))})})},"".concat(x.param_type,"-col2"))]},x.param_type);case"resource":return(0,t.jsxs)(n.A,{gutter:24,children:[(0,t.jsx)(r.A,{span:14,children:(0,t.jsx)(s.A.Item,{label:(0,t.jsx)("span",{style:_,title:x.param_description,children:x.param_description}),name:"".concat(x.param_type,"_sub_type"),labelCol:{flex:"80px"},children:(0,t.jsx)(o.A,{className:"h-10",options:x.sub_types&&x.sub_types.map(e=>({value:e,label:e}))||[],placeholder:"请选择".concat(x.param_description)})})},"".concat(x.param_type,"-col1")),(0,t.jsx)(r.A,{span:10,children:(0,t.jsx)(s.A.Item,{name:"".concat(x.param_type,"_value"),children:(0,t.jsx)(o.A,{options:d,className:"flex-1 h-10",placeholder:"请输入资源",disabled:c.includes(l.getFieldValue("".concat(x.param_type,"_sub_type")))})})},"".concat(x.param_type,"-col2"))]},x.param_type);case"fault_type":let y=x.param_type_options&&x.param_type_options.length>0?x.param_type_options:[{label:"网络故障",value:"网络故障"},{label:"存储故障",value:"存储故障"},{label:"计算故障",value:"计算故障"}];return(0,t.jsx)(n.A,{gutter:24,children:(0,t.jsx)(r.A,{span:24,children:(0,t.jsx)(s.A.Item,{label:(0,t.jsx)("span",{style:_,title:x.param_description,children:x.param_description}),name:"".concat(x.param_type,"_value"),labelCol:{flex:"80px"},initialValue:x.param_default_value||"网络故障",children:(0,t.jsx)(o.A,{options:y,className:"h-10",placeholder:"请选择故障类型",onBlur:()=>p("".concat(x.param_type,"_value"))})})},"".concat(x.param_type,"-col1"))},x.param_type);case"project_name":let h=x.param_type_options&&x.param_type_options.length>0?x.param_type_options:[{label:"重庆健康云ECS",value:"重庆健康云ECS"},{label:"长春政务云ECS",value:"长春政务云ECS"},{label:"新疆石河子ECS",value:"新疆石河子ECS"}];return(0,t.jsx)(n.A,{gutter:24,children:(0,t.jsx)(r.A,{span:24,children:(0,t.jsx)(s.A.Item,{label:(0,t.jsx)("span",{style:_,title:x.param_description,children:x.param_description}),name:"".concat(x.param_type,"_value"),labelCol:{flex:"80px"},initialValue:x.param_default_value||"项目名称",children:(0,t.jsx)(o.A,{options:h,className:"h-10",placeholder:"请选择项目名称",onBlur:()=>p("".concat(x.param_type,"_value"))})})},"".concat(x.param_type,"-col1"))},x.param_type);default:return null}})})})}}]);