(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4873],{7132:(e,t,a)=>{"use strict";a.d(t,{ZI:()=>o,zq:()=>l});let n="/models/huggingface.svg",l=new Proxy({},{get:(e,t)=>({label:function(e){var t;if(!e)return"";if(null==(t=r[e])?void 0:t.label)return r[e].label;let a=e.toLowerCase();for(let t in r){let n=r[t];if(n.patterns&&n.patterns.some(e=>a.includes(e.toLowerCase()))){let t=e.match(/[-_](\d+b|\d+\.\d+b?|v\d+(\.\d+)?)/i),a=e.match(/[-_](\d+b)/i),l=n.label;return t&&!a&&(l+=" ".concat(t[1])),a&&(l+=" ".concat(a[1])),l}}return e}(t),icon:o(t)})}),r={deepseek:{label:"DeepSeek",icon:"/models/deepseek.png",patterns:["deepseek","r1"]},qwen:{label:"Qwen",icon:"/models/qwen2.png",patterns:["qwen","qwen2","qwen2.5","qwq","qvq"]},gemini:{label:"Gemini",icon:"/models/gemini.png",patterns:["gemini"]},moonshot:{label:"Moonshot",icon:"/models/moonshot.png",patterns:["moonshot","kimi"]},doubao:{label:"Doubao",icon:"/models/doubao.png",patterns:["doubao"]},ernie:{label:"ERNIE",icon:"/models/ernie.png",patterns:["ernie"]},proxyllm:{label:"Proxy LLM",icon:"/models/chatgpt.png",patterns:["proxy"]},chatgpt:{label:"ChatGPT",icon:"/models/chatgpt.png",patterns:["chatgpt","gpt","o1","o3"]},vicuna:{label:"Vicuna",icon:"/models/vicuna.jpeg",patterns:["vicuna"]},chatglm:{label:"ChatGLM",icon:"/models/chatglm.png",patterns:["chatglm","glm"]},llama:{label:"Llama",icon:"/models/llama.jpg",patterns:["llama","llama2","llama3"]},baichuan:{label:"Baichuan",icon:"/models/baichuan.png",patterns:["baichuan"]},claude:{label:"Claude",icon:"/models/claude.png",patterns:["claude"]},bard:{label:"Bard",icon:"/models/bard.gif",patterns:["bard"]},tongyi:{label:"Tongyi",icon:"/models/tongyi.apng",patterns:["tongyi"]},yi:{label:"Yi",icon:"/models/yi.svg",patterns:["yi"]},bailing:{label:"Bailing",icon:"/models/bailing.svg",patterns:["bailing"]},wizardlm:{label:"WizardLM",icon:"/models/wizardlm.png",patterns:["wizard"]},internlm:{label:"InternLM",icon:"/models/internlm.png",patterns:["internlm"]},solar:{label:"Solar",icon:"/models/solar_logo.png",patterns:["solar"]},gorilla:{label:"Gorilla",icon:"/models/gorilla.png",patterns:["gorilla"]},zhipu:{label:"Zhipu",icon:"/models/zhipu.png",patterns:["zhipu"]},falcon:{label:"Falcon",icon:"/models/falcon.jpeg",patterns:["falcon"]},huggingface:{label:"Hugging Face",icon:"/models/huggingface.svg",patterns:["huggingface","hf"]}};function o(e){var t;if(!e)return n;let a=e.toLowerCase();if(null==(t=r[e])?void 0:t.icon)return r[e].icon;for(let e in r){let t=r[e];if(t.patterns&&t.patterns.some(e=>a.includes(e.toLowerCase())))return t.icon}let l=a.split(/[-_]/);if(l.length>0){let e=l[0];for(let t in r)if(e===t.toLowerCase())return r[t].icon}return n}},20409:(e,t,a)=>{Promise.resolve().then(a.bind(a,61247))},28867:(e,t,a)=>{"use strict";a.d(t,{fG:()=>es,LO:()=>ec,$q:()=>i.$q,tI:()=>E,A1:()=>ee,Wz:()=>v,CB:()=>S,Ty:()=>p,Vb:()=>el,CK:()=>P,cT:()=>$,kQ:()=>X,TT:()=>Q,a8:()=>j,Tu:()=>U,O_:()=>M,Ir:()=>b,mr:()=>d,Eg:()=>i.Eg,Y6:()=>K,eH:()=>i.eH,rW:()=>i.rW,Db:()=>i.Db,su:()=>i.su,lw:()=>z,r:()=>L,d_:()=>i.d_,PS:()=>i.PS,PO:()=>i.PO,RI:()=>G,b7:()=>x,uh:()=>q,ME:()=>I,B1:()=>Y,O6:()=>W,RO:()=>y,BN:()=>i.BN,zx:()=>Z,Hy:()=>O,Mz:()=>V,Xr:()=>i.Xr,Tz:()=>C,f1:()=>w,j_:()=>k,C0:()=>ea,o0:()=>N,b1:()=>f,C5:()=>_,LU:()=>i.LU,T1:()=>m,K8:()=>g,Cf:()=>u,GE:()=>A,V6:()=>c,Nq:()=>et,Mn:()=>F,vc:()=>s,kE:()=>D,Z9:()=>R,Ps:()=>B,bQ:()=>H,bl:()=>J,fy:()=>i.fy,Nr:()=>i.Nr,qj:()=>h,XX:()=>T});var n,l=a(47937),r=a(81702),o=a(23464),i=a(92366);let s=e=>ec("/api/v1/chat/stop?conv_session_id=".concat(e.conv_session_id),e);(0,l.F6)();let c=(e,t)=>ec("/knowledge/".concat(e,"/document/list"),t),p=e=>ec("/knowledge/".concat(e.space_name,"/document/yuque/add"),e),d=(e,t)=>ec("/knowledge/".concat(e,"/document/edit"),t),u=e=>es("/knowledge/".concat(e,"/recommend_questions")),m=e=>es("/knowledge/".concat(e,"/recall_retrievers")),g=(e,t)=>ec("/knowledge/".concat(t,"/recall_test"),e),_=e=>es("/prompt/type/targets?prompt_type=".concat(e)),f=e=>ec("/prompt/template/load?prompt_type=".concat(e.prompt_type,"&target=").concat(e.target,"&sub_target=").concat(e.sub_target),e),v=e=>ec("/prompt/add",e),h=e=>ec("/prompt/update",e),b=e=>ec("/prompt/delete",e),y=e=>ec("/prompt/query_page?page=".concat(e.page,"&page_size=").concat(e.page_size),e),w=e=>ec("/prompt/response/verify",e),k=e=>ec("/api/v1/chat/dialogue/new?app_code=".concat(e.app_code),e),x=()=>es("/api/v1/chat/dialogue/list"),q=e=>es("/api/v1/chat/dialogue/list?filter=".concat(e)),C=()=>es("/api/v1/model/types"),L=e=>es("/api/v1/chat/dialogue/messages/history?con_uid=".concat(e)),N=e=>{let{convUid:t,chatMode:a,data:n,config:l,model:r,temperatureValue:o,maxNewTokensValue:i,userName:s,sysCode:c}=e;return ec(((e,t)=>{let a=Object.keys(t).filter(e=>void 0!==t[e]).map(e=>"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))).join("&");return a?"".concat(e,"?").concat(a):e})("/api/v1/resource/file/upload",{conv_uid:t,chat_mode:a,model_name:r,user_name:s,sys_code:c,temperature:o,max_new_tokens:i}),n,{headers:{"Content-Type":"multipart/form-data"},...l})},P=e=>ec("/api/v1/chat/dialogue/clear?con_uid=".concat(e)),j=e=>ec("/api/v1/chat/dialogue/delete?con_uid=".concat(e)),z=e=>ec("/knowledge/".concat(e,"/arguments"),{}),A=(e,t)=>ec("/knowledge/".concat(e,"/argument/save"),t),O=e=>ec("/knowledge/space/list",e),I=(e,t)=>ec("/knowledge/".concat(e,"/document/list"),t),E=(e,t)=>ec("/knowledge/".concat(e,"/document/add"),t),S=e=>ec("/knowledge/space/add",e),G=()=>es("/knowledge/document/chunkstrategies"),B=(e,t)=>ec("/knowledge/".concat(e,"/document/sync"),t),R=(e,t)=>ec("/knowledge/".concat(e,"/document/sync_batch"),t),T=(e,t)=>ec("/knowledge/".concat(e,"/document/upload"),t),U=(e,t)=>ec("/knowledge/".concat(e,"/document/delete"),t),M=e=>ec("/knowledge/space/delete",e),W=()=>es("/api/v2/serve/model/models"),X=e=>ec("/api/v2/serve/model/models",e),D=e=>ec("/api/v2/serve/model/models/stop",e),F=e=>ec("/api/v2/serve/model/models/start",e),V=()=>es("/api/v2/serve/model/model-types"),$=e=>ec("/api/v1/app/collect",e),H=e=>ec("/api/v1/app/uncollect",e),J=e=>ec("/api/v1/app/unpublish",{app_code:e}),K=e=>es("/api/v1/app/info",e),Q=e=>ec("/api/v1/app/remove",e),Z=()=>es("/knowledge/space/config"),Y=(e,t)=>ec("/api/v1/serve/mcp/query_fuzzy?page=".concat(null==t?void 0:t.page,"&page_size=").concat(null==t?void 0:t.page_size),e),ee=e=>ec("/api/v1/serve/mcp/",e),et=e=>ec("/api/v1/serve/mcp/start",e),ea=e=>ec("/api/v1/serve/mcp/offline",e);var en=a(59362);let el=(e,t,a)=>e.then(e=>{let{data:n}=e;if(!n)throw Error("Network Error!");if(!n.success)if("*"===a||n.err_code&&a&&a.includes(n.err_code));else{var l;t&&t.error({message:"Request error",description:null!=(l=null==n?void 0:n.err_msg)?l:"The interface is abnormal. Please try again later"})}return[null,n.data,n,e]}).catch(e=>{let a=e.message;if(e instanceof en.pe)try{let{err_msg:t}=JSON.parse(e.request.response);t&&(a=t)}catch(e){}return t&&t.error({message:"Request error",description:a}),[e,null,null,null]});var er=a(49509);let eo=o.A.create({baseURL:null!=(n=er.env.NEXT_PUBLIC_API_BASE_URL)?n:"/"}),ei=["/db/add","/db/test/connect","/db/summary","/params/file/load","/chat/prepare","/model/start","/model/stop","/editor/sql/run","/sql/editor/submit","/editor/chart/run","/chart/editor/submit","/document/upload","/document/sync","/agent/install","/agent/uninstall","/personal/agent/upload"];eo.interceptors.request.use(e=>{let t=ei.some(t=>e.url&&e.url.indexOf(t)>=0);return e.timeout||(e.timeout=t?6e4:1e5),e.headers.set(r.uz,(0,l.F6)()),e});let es=(e,t,a)=>eo.get(e,{params:t,...a}),ec=(e,t,a)=>eo.post(e,t,a)},47937:(e,t,a)=>{"use strict";a.d(t,{yx:()=>s,A4:()=>p,oF:()=>r,F6:()=>o,nr:()=>m,UX:()=>u,sC:()=>d});var n=a(94936);a(7132);var l=a(81702);function r(){var e;let t=null!=(e=localStorage.getItem(l.yx))?e:"";try{return JSON.parse(t)}catch(e){return null}}function o(){try{var e;return JSON.parse(null!=(e=localStorage.getItem(l.Gm))?e:"").user_id}catch(e){return}}var i=a(49509);let s="__db_gpt_im_key",c=["mysql","duckdb","sqlite","postgresql","db2","spark","hive","bigquery","db2i","mariadb","tidb","n1ql","plsql","redshift","sql","trino","transactsql","singlestoredb","snowflake","tsql"];function p(e,t){if(!e)return"";try{let a=c.includes(t)?t:void 0;return(0,n.GP)(e,{language:a})}catch(t){return e}}let d=e=>{try{if(!e.startsWith("derisk-fs://"))return e;let t=new URL(e);if("derisk-fs:"!==t.protocol)return e;let a=t.pathname.split("/").filter(Boolean);if(a.length<2)return e;let n=a[0],l=a[1];return"".concat(i.env.NEXT_PUBLIC_API_BASE_URL||"","/api/v2/serve/file/files/").concat(n,"/").concat(l).concat(t.search)}catch(t){return console.error("Error transforming file URL:",t),e}},u=e=>e&&e.file_name?'\n```vis-attatch\n{"name": "'.concat(e.file_name,'", "type": "text_file", "url": "').concat(e.file_url,'" }\n```'):"",m=e=>{if(!e||null==e)return[];try{let t=e;if("string"==typeof e){let a=e.trim();t=a.startsWith("{")||a.startsWith("[")?JSON.parse(e):e}if(t&&!Array.isArray(t)&&"object"==typeof t)if(t.file_name||t.file_path){let e=t.file_name||"",a=t.file_path||t.url||"",n=/\.(jpg|jpeg|png|gif|bmp|webp|svg)$/i.test(e),l=/\.(mp3|wav|ogg|aac|flac|m4a)$/i.test(e),r=/\.(mp4|webm|mov|avi|wmv|flv|mkv)$/i.test(e);t=n?[{type:"image_url",image_url:{url:a,file_name:e}}]:l?[{type:"audio_url",audio_url:{url:a,file_name:e}}]:r?[{type:"video_url",video_url:{url:a,file_name:e}}]:[{type:"file_url",file_url:{url:a,file_name:e}}]}else t=[t];else if(!Array.isArray(t))return[];return t}catch(e){return console.error("Parse resourceValue error:",e),[]}}},61247:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(95155),l=a(28867),r=a(44261),o=a(54099),i=a(55887),s=a(27212),c=a(98696),p=a(90797),d=a(97226),u=a(3795),m=a(98118),g=a(35695),_=a(12115),f=a(91218);let v={zh:"中文",en:"English"},h=e=>{let{record:t,refresh:a}=e,{t:r}=(0,f.Bd)(),{message:p}=i.A.useApp(),{run:d,loading:u}=(0,o.A)(async e=>{await (0,l.Ir)({...e})},{manual:!0,onSuccess:async()=>{p.success("删除成功"),await a()}});return(0,n.jsx)(s.A,{title:"确认删除吗？",onConfirm:async()=>await d(t),children:(0,n.jsx)(c.Ay,{loading:u,children:r("Delete")})})},b=()=>{let e=(0,g.useRouter)(),{t}=(0,f.Bd)(),[a,i]=(0,_.useState)("common"),[s,b]=(0,_.useState)(),{run:y,loading:w,refresh:k}=(0,o.A)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,[a,n]=await (0,l.Vb)((0,l.RO)({page:e,page_size:t}));return n},{manual:!0,onSuccess:e=>{b(e)}});(0,_.useEffect)(()=>{y()},[a]);let x=[{value:"common",label:t("Public")+" Prompts"}];return(0,n.jsxs)("div",{className:"px-6 py-2 md:p-6 h-[90vh] overflow-y-auto [&_table]:table",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)(u.A,{className:"flex backdrop-blur-lg bg-white/30 border-2  [&_.ant-segmented-item-selected]:bg-[#0c75fc]/80 [&_.ant-segmented-item-selected]:text-white border-white rounded-lg shadow p-1 dark:border-[#6f7f95] dark:bg-[#6f7f95]/60",options:x,onChange:e=>i(e),value:a})}),(0,n.jsx)("div",{className:"flex items-center gap-4 h-10",children:(0,n.jsxs)(c.Ay,{className:"border-none text-white bg-button-gradient h-full",onClick:()=>{e.push("/prompt/add")},icon:(0,n.jsx)(r.A,{}),children:[t("Add")," Prompts"]})})]}),(0,n.jsx)(m.A,{columns:((e,t)=>[{title:e("Prompt_Info_Name"),dataIndex:"prompt_name",key:"prompt_name",width:"10%"},{title:e("Prompt_Info_Scene"),dataIndex:"chat_scene",key:"chat_scene",width:"10%"},{title:e("language"),dataIndex:"prompt_language",key:"prompt_language",render:e=>e?v[e]:"-",width:"10%"},{title:e("Prompt_Info_Content"),dataIndex:"content",key:"content",render:e=>(0,n.jsx)(p.A.Paragraph,{ellipsis:{rows:2,tooltip:!0},children:e})},{title:e("Operation"),dataIndex:"operate",key:"operate",render:(a,l)=>(0,n.jsxs)(d.A,{align:"center",children:[(0,n.jsx)(c.Ay,{onClick:()=>{t(l)},type:"primary",children:e("Edit")}),(0,n.jsx)(h,{record:l,refresh:k})]})}])(t,t=>{localStorage.setItem("edit_prompt_data",JSON.stringify(t)),e.push("/prompt/edit")}),dataSource:(null==s?void 0:s.items)||[],loading:w,rowKey:e=>e.prompt_name,pagination:{pageSize:6,total:null==s?void 0:s.total_count,onChange:async(e,t)=>{await y(e,t)}}})]})}},81702:(e,t,a)=>{"use strict";a.d(t,{uz:()=>n,yx:()=>o,Vp:()=>r,Mt:()=>l,Gm:()=>i,DO:()=>s});let n="user-id",l="__db_gpt_theme_key",r="__db_gpt_lng_key",o="__db_gpt_im_key",i="__db_gpt_uinfo_key",s="__db_gpt_uinfo_vt_key"},92366:(e,t,a)=>{"use strict";a.d(t,{$q:()=>r,BN:()=>c,Db:()=>p,Eg:()=>d,LU:()=>v,Nr:()=>u,PO:()=>m,PS:()=>_,Xr:()=>l,d_:()=>g,eH:()=>i,fy:()=>o,rW:()=>s,su:()=>f});var n=a(28867);let l=()=>(0,n.fG)("/api/v1/team-mode/list"),r=e=>(0,n.LO)("/api/v1/app/building/create",e),o=e=>(0,n.LO)("/api/v1/app/building/edit",e,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}),i=e=>(0,n.LO)("/api/v1/app/list?page=".concat(e.page||1,"&page_size=").concat(e.page_size||12),e),s=()=>(0,n.fG)("/api/v1/llm-strategy/list"),c=e=>(0,n.fG)("/api/v1/app/resources/list?type=".concat(e.type,"&version=v2")),p=e=>(0,n.fG)("/api/v1/llm-strategy/value/list?type=".concat(e)),d=e=>(0,n.fG)("/api/v1/app/".concat(e,"/admins")),u=e=>(0,n.LO)("/api/v1/app/admins/update",e),m=()=>(0,n.fG)("/api/v1/serve/building/config/chat/out/modes"),g=()=>(0,n.fG)("/api/v1/serve/building/config/chat/in/params/all"),_=e=>(0,n.LO)("/api/v1/serve/building/config/chat/in/params/render",e),f=e=>(0,n.fG)("/api/v1/serve/building/config/list?app_code=".concat(e.app_code,"&page=",1,"&page_size=",100)),v=e=>(0,n.LO)("/api/v1/serve/app/publish",e)}},e=>{e.O(0,[1846,4925,797,9595,2343,6467,7744,5887,9211,6511,941,8441,5964,7358],()=>e(e.s=20409)),_N_E=e.O()}]);