(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8457],{14245:(e,t,l)=>{Promise.resolve().then(l.bind(l,16710))},16710:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>w});var a=l(95155),r=l(28867),s=l(12115),n=l(54099),d=l(62471),i=l(50715),o=l(93640),u=l(9409),c=l(47937),m=l(86253),x=l(16467),p=l(17238),h=l(35695),b=l(91070),g=l(86355),f=l(6124),v=l(97540);function _(){let[e,t]=(0,s.useState)([]),l=(0,h.useRouter)();(0,s.useEffect)(()=>{d()},[]);let{run:d,loading:i}=(0,n.A)(async()=>{let[e,t]=await (0,r.Vb)((0,r.eH)({page:1,page_size:10,published:!0}));return t},{manual:!0,onSuccess:e=>{e&&t(e.app_list||[])}}),o=async e=>{let[,t]=await (0,r.Vb)((0,r.j_)({app_code:e.app_code}));t&&l.push("/chat/?app_code=".concat(e.app_code,"&conv_uid=").concat(t.conv_uid))};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-slate-900 dark:via-indigo-900 dark:to-purple-900 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-20 -right-20 w-72 h-72 bg-gradient-to-br from-blue-400/30 to-indigo-500/20 rounded-full blur-2xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute -bottom-32 -left-32 w-96 h-96 bg-gradient-to-tr from-purple-400/25 to-pink-500/15 rounded-full blur-3xl"}),(0,a.jsx)("div",{className:"absolute top-1/3 right-1/4 w-64 h-64 bg-gradient-to-r from-cyan-300/20 to-blue-400/15 rounded-full blur-2xl"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 left-1/3 w-48 h-48 bg-gradient-to-br from-indigo-300/25 to-purple-400/20 rounded-full blur-xl"})]}),(0,a.jsx)("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 py-12",children:(0,a.jsxs)("div",{className:"w-full max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-16",children:[(0,a.jsxs)("div",{className:"inline-flex items-center justify-center p-6 mb-8 bg-white/90 dark:bg-slate-800/90 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 dark:border-slate-600/30 hover:shadow-3xl transition-all duration-500",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mr-4 shadow-lg",children:(0,a.jsx)("span",{className:"text-3xl",children:"\uD83E\uDD16"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 mb-1",children:"OpsDiag私有云智能助手"}),(0,a.jsx)("div",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"智能运维 \xb7 私有部署 \xb7 7\xd724小时服务"})]})]}),(0,a.jsx)("p",{className:"text-lg md:text-xl text-slate-600 dark:text-slate-300 max-w-4xl mx-auto leading-relaxed font-light mb-8",children:"为每个应用系统提供一个7*24H的AI系统数字管家，并能与真人进行协同，7*24H处理业务问题，形成7*24H得深度护航与防护网。"}),(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2 mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"系统运行正常"})]})})]}),(0,a.jsx)("div",{className:"mb-16",children:(0,a.jsxs)("div",{className:"bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-3xl shadow-2xl border border-white/40 dark:border-slate-600/40 p-10 hover:shadow-3xl transition-all duration-300 hover:scale-[1.02] transform",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl mr-3 shadow-md",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCAC"})}),"开始新的对话"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"实时响应"})]})]}),(0,a.jsx)("p",{className:"text-base text-slate-600 dark:text-slate-300 mb-4",children:"\uD83D\uDE80 输入您的运维问题，我将为您提供专业的解决方案"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,a.jsx)("span",{className:"px-4 py-2 bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:"\uD83D\uDD0D 系统监控"}),(0,a.jsx)("span",{className:"px-4 py-2 bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-900/40 dark:to-purple-800/40 text-purple-700 dark:text-purple-300 rounded-full text-sm font-medium shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:"\uD83D\uDD27 故障诊断"}),(0,a.jsx)("span",{className:"px-4 py-2 bg-gradient-to-r from-indigo-100 to-indigo-200 dark:from-indigo-900/40 dark:to-indigo-800/40 text-indigo-700 dark:text-indigo-300 rounded-full text-sm font-medium shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:"⚡ 性能优化"}),(0,a.jsx)("span",{className:"px-4 py-2 bg-gradient-to-r from-green-100 to-green-200 dark:from-green-900/40 dark:to-green-800/40 text-green-700 dark:text-green-300 rounded-full text-sm font-medium shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:"\uD83D\uDEE1️ 安全防护"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400 rounded-2xl blur opacity-20 group-hover:opacity-30 transition duration-1000"}),(0,a.jsx)(g.A,{bodyClassName:"relative min-h-[120px] bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-slate-700 dark:via-slate-600 dark:to-slate-600 border-2 border-blue-200 dark:border-blue-700 rounded-2xl shadow-inner focus-within:border-blue-400 dark:focus-within:border-blue-500 focus-within:shadow-lg transition-all duration-300 placeholder:text-slate-400",minRows:5,maxRows:10,cneterBtn:!1})]})]})}),e.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200 flex items-center mb-2",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDE80"}),"快速开始"]}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"选择一个应用快速开始对话"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,a.jsx)(f.A,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl border-0 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",styles:{body:{padding:"20px"}},onClick:()=>o(e),children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.icon?(0,a.jsx)("img",{src:e.icon,alt:e.app_name,className:"w-14 h-14 rounded-xl object-cover shadow-md"}):(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-md",children:e.app_name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(v.A,{title:e.app_name,placement:"top",children:(0,a.jsx)("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100 truncate mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.app_name})}),(0,a.jsx)(v.A,{title:e.app_describe||"暂无描述",placement:"bottom",children:(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2 leading-relaxed",children:e.app_describe||"暂无描述"})})]})]})},e.app_code))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[(0,a.jsxs)("div",{className:"text-center p-6 bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm rounded-2xl border border-white/20 dark:border-slate-700/50",children:[(0,a.jsx)("div",{className:"text-3xl mb-3",children:"⚡"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"智能响应"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"7\xd724小时智能响应，快速解决您的问题"})]}),(0,a.jsxs)("div",{className:"text-center p-6 bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm rounded-2xl border border-white/20 dark:border-slate-700/50",children:[(0,a.jsx)("div",{className:"text-3xl mb-3",children:"\uD83D\uDEE1️"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"安全可靠"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"企业级安全保障，数据隐私严格保护"})]}),(0,a.jsxs)("div",{className:"text-center p-6 bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm rounded-2xl border border-white/20 dark:border-slate-700/50",children:[(0,a.jsx)("div",{className:"text-3xl mb-3",children:"\uD83C\uDFAF"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"精准分析"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"深度学习算法，提供精准的业务分析"})]})]})]})})]})}let{Content:j}=m.A;function w(){var e,t,l,g,f;let v=(0,h.useSearchParams)(),w=null!=(t=(null==v?void 0:v.get("conv_uid"))||(null==v?void 0:v.get("chatId")))?t:"",N=null!=(l=null==v?void 0:v.get("app_code"))?l:"",y=null!=(g=null==v?void 0:v.get("model"))?g:"",k=null!=(f=null==v?void 0:v.get("knowledge"))?f:"",D=(0,s.useRef)(null),S=(0,s.useRef)(1),[A,C]=(0,s.useState)([]),[E]=(0,s.useState)(),[O,F]=(0,s.useState)(!1),[R,V]=(0,s.useState)(!1),[z,J]=(0,s.useState)(""),[H,I]=(0,s.useState)({}),[P,B]=(0,s.useState)(.6),[K,M]=(0,s.useState)(4e3),[U,T]=(0,s.useState)(),[X,Y]=(0,s.useState)(""),[q,G]=(0,s.useState)(!0),[L,Q]=(0,s.useState)([]);(0,s.useRef)(null);let{chat:W,ctrl:Z}=(0,o.A)({app_code:N||""});(0,s.useEffect)(()=>{var e,t,l;if(null==H||null==(t=H.layout)||null==(e=t.chat_in_layout)?void 0:e.length){let e=null==H||null==(l=H.layout)?void 0:l.chat_in_layout,t=e.find(e=>"temperature"===e.param_type),a=e.find(e=>"max_new_tokens"===e.param_type),r=e.find(e=>"resource"===e.param_type),s=e.find(e=>"model"===e.param_type);B(Number(null==t?void 0:t.param_default_value)||.6),M(Number(null==a?void 0:a.param_default_value)||4e3),Y(y||(null==s?void 0:s.param_default_value)||""),T(k||(null==r?void 0:r.param_default_value)||null),Q([...t?[{param_type:"temperature",param_value:"string"==typeof(null==t?void 0:t.param_default_value)?null==t?void 0:t.param_default_value:JSON.stringify(null==t?void 0:t.param_default_value),sub_type:null==t?void 0:t.sub_type}]:[],...a?[{param_type:"max_new_tokens",param_value:"string"==typeof(null==a?void 0:a.param_default_value)?null==a?void 0:a.param_default_value:JSON.stringify(null==a?void 0:a.param_default_value),sub_type:null==a?void 0:a.sub_type}]:[],...r?[{param_type:"resource",param_value:"string"==typeof(null==r?void 0:r.param_default_value)?k||(null==r?void 0:r.param_default_value):JSON.stringify(k||(null==r?void 0:r.param_default_value)),sub_type:null==r?void 0:r.sub_type}]:[],...s?[{param_type:"model",param_value:"string"==typeof(null==s?void 0:s.param_default_value)?y||(null==s?void 0:s.param_default_value):JSON.stringify(y||(null==s?void 0:s.param_default_value)),sub_type:null==s?void 0:s.sub_type}]:[]])}},[null==H||null==(e=H.layout)?void 0:e.chat_in_layout,y]);let $=(0,s.useMemo)(()=>!w,[w]),{data:ee=[],refresh:et,loading:el}=(0,n.A)(async()=>await (0,r.Vb)((0,r.b7)())),{run:ea,refresh:er,loading:es}=(0,n.A)(async()=>await (0,r.Vb)((0,r.Y6)({app_code:N,building_mode:!1})),{manual:!0,onSuccess:e=>{let[,t]=e;I(t||{})}}),en=(0,s.useMemo)(()=>{let[,e]=ee;return(null==e?void 0:e.find(e=>e.conv_uid===w))||{}},[w,ee]);(0,s.useEffect)(()=>{$||ea()},[w,$,ea,N]);let{run:ed,loading:ei,refresh:eo}=(0,n.A)(async()=>await (0,r.Vb)((0,r.r)(w)),{manual:!0,onSuccess:e=>{let[,t]=e,l=null==t?void 0:t.filter(e=>"view"===e.role);l&&l.length>0&&(S.current=l[l.length-1].order+1),C(t||[])}}),eu=(0,s.useCallback)((e,t)=>new Promise(l=>{var a,r,s,n,d,i;let o=(0,c.oF)(),u=new AbortController;if(F(!0),A&&A.length>0){let e=null==A?void 0:A.filter(e=>"view"===e.role),t=null==A?void 0:A.filter(e=>"human"===e.role);S.current=((null==(d=e[e.length-1])?void 0:d.order)||(null==(i=t[t.length-1])?void 0:i.order))+1}let m="";if("string"==typeof e)m=e;else{let t=e.content||[],l=t.filter(e=>"text"===e.type),a=t.filter(e=>"text"!==e.type);l.length>0&&(m=l.map(e=>e.text).join(" "));let r=a.map(e=>{if("image_url"===e.type){var t,l;let a=(null==(t=e.image_url)?void 0:t.url)||"",r=(0,c.sC)(a),s=(null==(l=e.image_url)?void 0:l.fileName)||"image";return"\n![".concat(s,"](").concat(r,")")}if("video"===e.type){let t=e.video||"",l=(0,c.sC)(t);return"\n[Video](".concat(l,")")}{let t=(0,c.UX)(e.file_url);return"\n".concat(t)}}).join("\n");r&&(m=m+"\n"+r)}let x=[...o&&o.id===w?[]:A,{role:"human",context:m,model_name:(null==t?void 0:t.model_name)||X,order:S.current,time_stamp:0},{role:"view",context:"",model_name:(null==t?void 0:t.model_name)||X,order:S.current,time_stamp:0,thinking:!0}],p=x.length-1;C([...x]),W({data:{user_input:e,team_mode:(null==H?void 0:H.team_mode)||"",app_config_code:(null==H?void 0:H.config_code)||"",conv_uid:w,ext_info:{vis_render:(null==H||null==(r=H.layout)||null==(a=r.chat_layout)?void 0:a.name)||"",incremental:(null==H||null==(n=H.layout)||null==(s=n.chat_layout)?void 0:s.incremental)||!1},...t},ctrl:u,chatId:w,onMessage:e=>{V(!0),e&&((null==t?void 0:t.incremental)?x[p].context+=e:x[p].context=e,x[p].thinking=!1,C([...x]))},onDone:()=>{F(!1),V(!1),l()},onClose:()=>{F(!1),V(!1),l()},onError:e=>{F(!1),V(!1),x[p].context=e,x[p].thinking=!1,C([...x]),l()}})}),[A,X,W,H]);(0,d.A)(async()=>{if($)return;let e=(0,c.oF)();(!e||e.id!==w)&&w&&await ed()},[w,ed,N]),(0,s.useEffect)(()=>{$&&(S.current=1,C([]))},[$]);let ec=(0,i.A)(eu,{wait:500});return(0,d.A)(async()=>{let e=(0,c.oF)();e&&e.id===w&&H&&(null==L?void 0:L.length)>0&&(ec.run(e.message,{app_code:null==H?void 0:H.app_code,...(null==L?void 0:L.length)&&{chat_in_params:L}}),et&&await et(),localStorage.removeItem(c.yx))},[w,(0,c.oF)(),H,L]),(0,a.jsx)(b.zo.Provider,{value:{history:A,replyLoading:O,scrollRef:D,canAbort:R,chartsData:E||[],agent:z,currentDialogue:en,appInfo:H,temperatureValue:P,maxNewTokensValue:K,resourceValue:U,modelValue:X,setModelValue:Y,setResourceValue:T,setTemperatureValue:B,setMaxNewTokensValue:M,setAppInfo:I,setAgent:J,setCanAbort:V,setReplyLoading:F,handleChat:eu,refreshDialogList:et,refreshHistory:eo,refreshAppInfo:er,setHistory:C,isShowDetail:q,setChatInParams:Q,chatInParams:L},children:(0,a.jsx)(p.A,{flex:1,children:(0,a.jsx)(m.A,{className:"bg-gradient-light bg-cover bg-center dark:bg-gradient-dark w-full",children:(0,a.jsx)(m.A,{className:"bg-transparent",children:$?(0,a.jsx)(j,{children:(0,a.jsx)(_,{})}):(0,a.jsx)(x.A,{spinning:es,wrapperClassName:"w-full h-screen",children:(0,a.jsx)(j,{className:"flex flex-col h-full",children:(0,a.jsx)(u.A,{ref:D,ctrl:Z})})})})})})})}},86355:(e,t,l)=>{"use strict";l.d(t,{A:()=>p});var a=l(95155),r=l(91070),s=l(28867),n=l(47937),d=l(56939),i=l(98696),o=l(29300),u=l.n(o),c=l(35695),m=l(12115),x=l(91218);let p=function(e){let{bodyClassName:t,minRows:l=1,maxRows:o,sendClassName:p,cneterBtn:h=!0,isGoPath:b=!1,input:g=""}=e,{setCurrentDialogInfo:f}=(0,m.useContext)(r.UK),{t:v}=(0,x.Bd)(),_=(0,c.useRouter)(),[j,w]=(0,m.useState)(""),[N,y]=(0,m.useState)(!1),[k,D]=(0,m.useState)(!1),S=async()=>{let[,e]=await (0,s.Vb)((0,s.j_)({app_code:"chat_normal"}));e&&(localStorage.setItem(n.yx,JSON.stringify({id:e.conv_uid,message:j})),_.push("/chat/?app_code=chat_normal&conv_uid=".concat(e.conv_uid))),w("")};return(0,a.jsxs)("div",{className:u()("flex flex-1 h-12 p-2 pl-4 items-center justify-between bg-white dark:bg-[#242733] dark:border-[#6f7f95] rounded-xl border border-gray-300 ".concat(N?"border-[#0c75fc]":""),t),children:[(0,a.jsx)(d.A.TextArea,{placeholder:v("input_tips"),className:"w-full resize-none border-0 p-0 focus:shadow-none",value:j,autoSize:{minRows:l,maxRows:o},onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey||k||(e.preventDefault(),j.trim()&&S()))},onChange:e=>{w(e.target.value)},onFocus:()=>{y(!0)},onBlur:()=>y(!1),onCompositionStart:()=>D(!0),onCompositionEnd:()=>D(!1)}),(0,a.jsx)(i.Ay,{type:"primary",className:u()("flex items-center justify-center w-14 h-8 rounded-lg text-sm  bg-button-gradient border-0",{"opacity-40 cursor-not-allowed":!j.trim()}),onClick:()=>{j.trim()&&S()},children:v("sent")})]})}}},e=>{e.O(0,[562,240,5600,2826,7330,4935,4316,8779,3930,3485,5033,1846,4925,7985,797,6939,9595,2343,5566,6467,2570,7744,5887,2275,5719,9211,4697,6174,7335,7942,7514,5532,1070,4496,5464,8441,5964,7358],()=>e(e.s=14245)),_N_E=e.O()}]);